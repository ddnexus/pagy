window.Pagy=(()=>{const P="sessionStorage"in window&&"BroadcastChannel"in window;let $="pagy",R,j,E;if(P)R=sessionStorage,j=new BroadcastChannel($),E=Date.now(),j.addEventListener("message",(q)=>{if(q.data.from){const F=R.getItem(q.data.key);if(F)j.postMessage({to:q.data.from,key:q.data.key,str:F})}else if(q.data.to){if(q.data.to==E)R.setItem(q.data.key,q.data.str)}});const U=new ResizeObserver((q)=>q.forEach((F)=>{F.target.querySelectorAll(".pagy-rjs").forEach((z)=>z.render())})),N=(q)=>btoa(String.fromCharCode(...new TextEncoder().encode(q))).replace(/[+/=]/g,(F)=>F=="+"?"-":F=="/"?"_":""),_=(q)=>new TextDecoder().decode(Uint8Array.from(atob(q),(F)=>F.charCodeAt(0))),B=()=>Math.floor(Math.random()*46656).toString(36),W=async(q,[F,[z,G]])=>{if(!P)return;let H=document.cookie.split(/;\s+/).find((Q)=>Q.startsWith($+"="))?.split("=")[1];if(!H)document.cookie=$+"="+(H=B());if(z&&!(z in R))j.postMessage({from:E,key:z}),await new Promise((Q)=>setTimeout(()=>Q(""),100));if(!z)do z=B();while(z in R);const M=R.getItem(z),L=M?JSON.parse(M):[void 0];if(G)L.splice(...G),R.setItem(z,JSON.stringify(L));for(let Q of q.querySelectorAll("a[href]")){const X=Q.href,T=new RegExp(`(?<=\\?.*)\\b${F}=(\\d+)`),Y=parseInt(X.match(T)[1]),C=N(JSON.stringify([H,z,Y,L.length,L[Y-1],L[Y]]));Q.href=X.replace(T,F+"="+C)}},x=(q,[[F,z,G,H,M],L,Q,X,T])=>{const Y=q.parentElement;let C=-1;if((q.render=()=>{const D=L.findIndex((Z)=>Z<Y.clientWidth);if(L[D]===C)return;let O=F;if(Q[D].forEach((Z,S)=>{O+=Z=="gap"?H:(typeof Z=="number"?z.replace("P ",Z):G).replace("L<",X?.[D][S]??Z+"<")}),O+=M,q.innerHTML="",q.insertAdjacentHTML("afterbegin",O),C=L[D],T)W(q,T)})(),q.classList.contains($+"-rjs"))U.observe(Y)},V=(q,[F])=>J(q,(z)=>F.replace("P ",z)),A=(q,[F,z])=>{J(q,(G)=>{return z.replace("P ",Math.max(Math.ceil(F/parseInt(G)),1)).replace("L ",G)})},J=(q,F)=>{const z=q.querySelector("input"),G=q.querySelector("a"),H=z.value,M=()=>{if(z.value===H)return;const[L,Q,X]=[z.min,z.value,z.max].map((T)=>parseInt(T)||0);if(Q<L||Q>X){z.value=H,z.select();return}G.href=F(z.value),G.click()};["change","focus"].forEach((L)=>z.addEventListener(L,()=>z.select())),z.addEventListener("focusout",M),z.addEventListener("keypress",(L)=>{if(L.key=="Enter")M()})};return{version:"9.3.3",init(q){const F=q instanceof HTMLElement?q:document,z=F.querySelectorAll("[data-pagy]");for(let G of z)try{const[H,...M]=JSON.parse(_(G.getAttribute("data-pagy")));if(H=="n")W(G,...M);else if(H=="nj")x(G,M);else if(H=="cj")V(G,M);else if(H=="sj")A(G,M)}catch(H){console.warn("Pagy.init: %o\n%s",G,H)}}}})();
