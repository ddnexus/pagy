window.Pagy=(()=>{const Z=sessionStorage,j=new BroadcastChannel("pagy"),F=Date.now();j.addEventListener("message",(z)=>{if(z.data.from){const B=Z.getItem(z.data.key);if(B)j.postMessage({to:z.data.from,key:z.data.key,cutoffs:B})}else if(z.data.to){if(z.data.to==F)Z.setItem(z.data.key,z.data.cutoffs)}});const A=new ResizeObserver((z)=>z.forEach((B)=>{B.target.querySelectorAll(".pagy-rjs").forEach((E)=>E.pagyRender()),B.target.querySelectorAll(".pagy-keyset").forEach((E)=>E.completeUrls())})),$={encode:(z)=>btoa(String.fromCharCode(...new TextEncoder().encode(z))),toSafe:(z)=>z.replace(/=/g,"").replace(/[+/]/g,(B)=>B=="+"?"-":"_"),safeEncode:(z)=>$.toSafe($.encode(z)),decode:(z)=>new TextDecoder().decode(Uint8Array.from(atob(z),(B)=>B.charCodeAt(0)))},C=(z,[B])=>{N(z,B)},N=async(z,B)=>{if(!B||!Array.isArray(B.update)||!B.cutoffs_param||!B.page_param)return;const E=document.cookie.split(/;\s+/).find((K)=>K.startsWith("pagy="))?.split("=")[1]||Math.floor(Math.random()*46656).toString(36);document.cookie="pagy="+E;let[D,...G]=B.update;if(D&&!(D in Z))j.postMessage({from:F,key:D}),await new Promise((K)=>setTimeout(()=>K(""),100));D||="pagy-"+Date.now().toString(36);const H=Z.getItem(D),M=H?JSON.parse(H):[null];if(G)M.splice(...G),Z.setItem(D,JSON.stringify(M));(z.completeUrls=()=>{for(let K of z.querySelectorAll("a[href]")){const X=K.href,L=new RegExp(`(?<=\\?.*)\\b${B.page_param}=([\\d]+)`),Q=parseInt(X.match(L)?.[1]),R=$.safeEncode(JSON.stringify([E,D,M.length,M[Q-1],M[Q]]));K.href=X+`&${B.cutoffs_param}=${R}`}})()},W=(z,[B,E,D,G])=>{const H=z.parentElement??z,M=Object.keys(E).map((L)=>parseInt(L)).sort((L,Q)=>Q-L);let K=-1;const X=(L,Q,R)=>L.replace(/__pagy_page__/g,Q).replace(/__pagy_label__/g,R);if((z.pagyRender=()=>{const L=M.find((T)=>T<H.clientWidth)||0;if(L===K)return;let Q=B.before;const R=E[L.toString()],x=D?.[L.toString()]??R.map((T)=>T.toString());R.forEach((T,q)=>{const U=x[q];let Y;if(typeof T=="number"){if(Y=X(B.a,T.toString(),U),typeof G?.page_param=="string"&&T==1)Y=P(Y,G.page_param)}else if(T=="gap")Y=B.gap;else Y=X(B.current,T,U);Q+=Y}),Q+=B.after,z.innerHTML="",z.insertAdjacentHTML("afterbegin",Q),K=L})(),z.classList.contains("pagy-rjs"))A.observe(H)},J=(z,[B,E])=>O(z,(D)=>[D,B.replace(/__pagy_page__/,D)],E),_=(z,[B,E,D])=>{O(z,(G)=>{const H=Math.max(Math.ceil(B/parseInt(G)),1).toString(),M=E.replace(/__pagy_page__/,H).replace(/__pagy_limit__/,G);return[H,M]},D)},O=(z,B,E)=>{const D=z.querySelector("input"),G=z.querySelector("a"),H=D.value,M=()=>{if(D.value===H)return;const[K,X,L]=[D.min,D.value,D.max].map((x)=>parseInt(x)||0);if(X<K||X>L){D.value=H,D.select();return}let[Q,R]=B(D.value);if(typeof E?.page_param=="string"&&Q==="1")R=P(R,E.page_param);G.href=R,G.click()};["change","focus"].forEach((K)=>D.addEventListener(K,()=>D.select())),D.addEventListener("focusout",M),D.addEventListener("keypress",(K)=>{if(K.key=="Enter")M()})},P=(z,B)=>z.replace(new RegExp(`[?&]${B}=1\\b(?!&)|\\b${B}=1&`),"");return{version:"9.3.3",init(z){const B=z instanceof Element?z:document,E=B.querySelectorAll("[data-pagy]");for(let D of E)try{const[G,...H]=JSON.parse($.decode(D.getAttribute("data-pagy")));if(G=="nav")C(D,H);else if(G=="nav_js")W(D,H);else if(G=="combo_js")J(D,H);else if(G=="selector_js")_(D,H)}catch(G){console.warn("Failed Pagy.init(): %o\n%s",D,G)}}}})();

//# debugId=F0DEAFFC2E0A2A4464756E2164756E21
//# sourceMappingURL=pagy.min.js.map
