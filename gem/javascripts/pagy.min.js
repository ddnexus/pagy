window.Pagy=(()=>{const E="sessionStorage"in window&&"BroadcastChannel"in window;let $="pagy",R,j,O;if(E)R=sessionStorage,j=new BroadcastChannel($),O=Date.now(),j.addEventListener("message",(q)=>{if(q.data.from){const F=R.getItem(q.data.key);if(F)j.postMessage({to:q.data.from,key:q.data.key,str:F})}else if(q.data.to){if(q.data.to==O)R.setItem(q.data.key,q.data.str)}});const B=new ResizeObserver((q)=>q.forEach((F)=>{F.target.querySelectorAll(".pagy-rjs").forEach((z)=>z.render())})),_=(q)=>btoa(String.fromCharCode(...new TextEncoder().encode(q))),x=(q)=>q.replace(/=/g,"").replace(/[+/]/g,(F)=>F=="+"?"-":"_"),N=(q)=>x(_(q)),V=(q)=>new TextDecoder().decode(Uint8Array.from(atob(q),(F)=>F.charCodeAt(0))),W=()=>Math.floor(Math.random()*46656).toString(36),J=async(q,[F,[z,G]])=>{if(!E)return;let H=document.cookie.split(/;\s+/).find((Q)=>Q.startsWith($+"="))?.split("=")[1];if(!H)document.cookie=$+"="+(H=W());if(z&&!(z in R))j.postMessage({from:O,key:z}),await new Promise((Q)=>setTimeout(()=>Q(""),100));if(!z)do z=W();while(z in R);const M=R.getItem(z),L=M?JSON.parse(M):[void 0];if(G)L.splice(...G),R.setItem(z,JSON.stringify(L));for(let Q of q.querySelectorAll("a[href]")){const X=Q.href,T=new RegExp(`(?<=\\?.*)\\b${F}=([\\d]+)`),Y=parseInt(X.match(T)?.[1]),C=N(JSON.stringify([H,z,Y,L.length,L[Y-1],L[Y]]));Q.href=X.replace(T,F+"="+C)}},A=(q,[[F,z,G,H,M],L,Q,X,T])=>{const Y=q.parentElement;let C=-1;if((q.render=()=>{const D=L.findIndex((Z)=>Z<Y.clientWidth);if(L[D]===C)return;let P=F;if(Q[D].forEach((Z,I)=>{P+=Z=="gap"?H:(typeof Z=="number"?z.replace("P ",Z):G).replace("L<",X?.[D][I]??Z+"<")}),P+=M,q.innerHTML="",q.insertAdjacentHTML("afterbegin",P),C=L[D],T)J(q,T)})(),q.classList.contains($+"-rjs"))B.observe(Y)},S=(q,[F])=>U(q,(z)=>F.replace("P ",z)),k=(q,[F,z])=>{U(q,(G)=>{return z.replace("P ",Math.max(Math.ceil(F/parseInt(G)),1)).replace("L ",G)})},U=(q,F)=>{const z=q.querySelector("input"),G=q.querySelector("a"),H=z.value,M=()=>{if(z.value===H)return;const[L,Q,X]=[z.min,z.value,z.max].map((T)=>parseInt(T)||0);if(Q<L||Q>X){z.value=H,z.select();return}G.href=F(z.value),G.click()};["change","focus"].forEach((L)=>z.addEventListener(L,()=>z.select())),z.addEventListener("focusout",M),z.addEventListener("keypress",(L)=>{if(L.key=="Enter")M()})};return{version:"9.3.3",init(q){const F=q instanceof HTMLElement?q:document,z=F.querySelectorAll("[data-pagy]");for(let G of z)try{const[H,...M]=JSON.parse(V(G.getAttribute("data-pagy")));if(H=="n")J(G,M);else if(H=="nj")A(G,M);else if(H=="cj")S(G,M);else if(H=="sj")k(G,M)}catch(H){console.warn("Pagy.init: %o\n%s",G,H)}}}})();
