window.Pagy=(()=>{const F=new ResizeObserver((z)=>z.forEach((A)=>A.target.querySelectorAll(".pagy-rjs").forEach((E)=>E.pagyRender()))),Y={encode:(z)=>btoa(String.fromCharCode(...new TextEncoder().encode(z))),toSafe:(z)=>z.replace(/=/g,"").replace(/[+/]/g,(A)=>A=="+"?"-":"_"),safeEncode:(z)=>Y.toSafe(Y.encode(z)),decode:(z)=>new TextDecoder().decode(Uint8Array.from(atob(z),(A)=>A.charCodeAt(0)))},O=(z,[A])=>{P(z,A)},P=(z,A)=>{if(!A||!Array.isArray(A.update)||!A.cutoffs_param||!A.page_param)return;history.replaceState(null,"",location.href.replace(RegExp(`&?${A.cutoffs_param}=.*\$`),""));let[E,B]=A.update;E||="pagy-"+Date.now().toString(36);const G=sessionStorage.getItem(E),D=G?JSON.parse(G):[null];if(B)D.push(B),sessionStorage.setItem(E,JSON.stringify(D));z.addEventListener("click",(R)=>{const H=R.target;if(H&&H.nodeName=="A"&&H.href.length>0){const T=H.href,K=new RegExp(`(?<=\\?.*)\\b${A.page_param}=([\\d]+)`),L=parseInt(T.match(K)?.[1]),M=Y.safeEncode(JSON.stringify([E,D.length,D[L-1],D[L]]));H.href=T+`&${A.cutoffs_param}=${M}`,console.warn("listener run")}})},U=(z,[A,E,B,G])=>{const D=z.parentElement??z,R=Object.keys(E).map((K)=>parseInt(K)).sort((K,L)=>L-K);let H=-1;const T=(K,L,M)=>K.replace(/__pagy_page__/g,L).replace(/__pagy_label__/g,M);if((z.pagyRender=()=>{const K=R.find((Q)=>Q<D.clientWidth)||0;if(K===H)return;let L=A.before;const M=E[K.toString()],Z=B?.[K.toString()]??M.map((Q)=>Q.toString());M.forEach((Q,W)=>{const x=Z[W];let X;if(typeof Q=="number"){if(X=T(A.a,Q.toString(),x),typeof G?.page_param=="string"&&Q==1)X=j(X,G.page_param)}else if(Q=="gap")X=A.gap;else X=T(A.current,Q,x);L+=X}),L+=A.after,z.innerHTML="",z.insertAdjacentHTML("afterbegin",L),H=K})(),z.classList.contains("pagy-rjs"))F.observe(D)},C=(z,[A,E])=>$(z,(B)=>[B,A.replace(/__pagy_page__/,B)],E),N=(z,[A,E,B])=>{$(z,(G)=>{const D=Math.max(Math.ceil(A/parseInt(G)),1).toString(),R=E.replace(/__pagy_page__/,D).replace(/__pagy_limit__/,G);return[D,R]},B)},$=(z,A,E)=>{const B=z.querySelector("input"),G=z.querySelector("a"),D=B.value,R=()=>{if(B.value===D)return;const[H,T,K]=[B.min,B.value,B.max].map((Z)=>parseInt(Z)||0);if(T<H||T>K){B.value=D,B.select();return}let[L,M]=A(B.value);if(typeof E?.page_param=="string"&&L==="1")M=j(M,E.page_param);G.href=M,G.click()};["change","focus"].forEach((H)=>B.addEventListener(H,()=>B.select())),B.addEventListener("focusout",R),B.addEventListener("keypress",(H)=>{if(H.key=="Enter")R()})},j=(z,A)=>z.replace(new RegExp(`[?&]${A}=1\\b(?!&)|\\b${A}=1&`),"");return{version:"9.3.3",init(z){const E=(z instanceof Element?z:document).querySelectorAll("[data-pagy]");for(let B of E)try{const[G,...D]=JSON.parse(Y.decode(B.getAttribute("data-pagy")));if(G=="nav")O(B,D);else if(G=="nav_js")U(B,D);else if(G=="combo_js")C(B,D);else if(G=="selector_js")N(B,D)}catch(G){console.warn("Failed Pagy.init(): %o\n%s",B,G)}}}})();

//# debugId=75134F4BCF68C50C64756E2164756E21
//# sourceMappingURL=pagy.min.js.map
