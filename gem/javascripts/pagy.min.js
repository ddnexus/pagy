window.Pagy=(()=>{const N=new ResizeObserver((B)=>B.forEach((z)=>z.target.querySelectorAll(".pagy-rjs").forEach((Q)=>Q.pagyRender()))),C={encode:(B)=>btoa(String.fromCharCode(...new TextEncoder().encode(B))),toSafe:(B)=>B.replace(/=/g,"").replace(/[+/]/g,(z)=>z=="+"?"-":"_"),safeEncode:(B)=>C.toSafe(C.encode(B)),decode:(B)=>new TextDecoder().decode(Uint8Array.from(atob(B),(z)=>z.charCodeAt(0)))},U=(B,[z])=>{W(B,z)},I=(B,z)=>{if(z===void 0||!Array.isArray(z.update))return;if(typeof z.cutoffs_param!=="string"||typeof z.page_param!=="string"){console.warn("Failed Pagy.initKeysetForUI():%o\n bad opts \n%o",B,z);return}const[Q,D]=z.update;let E=Q;if(E===null){let G=localStorage.getItem("maxKey");if(G===null)G="0";const H=parseInt(G)+1;localStorage.setItem("maxKey",H.toString()),E=H.toString(36)}const L=localStorage.getItem(E),M=L===null?[null]:JSON.parse(L);if(D!==void 0)M.splice(...D),localStorage.setItem(E,JSON.stringify(M));const{cutoffs_param:X,page_param:Y}=z;B.addEventListener("click",(G)=>{const H=G.target;if(H&&H.nodeName=="A"&&H.href!==void 0){const T=H.href,Z=new RegExp(`(?<=\\?.*)${Y}=([\\d]+)`),R=T.match(Z)?.[1];if(typeof R!=="string")return;const $=parseInt(R),O=C.safeEncode(JSON.stringify([E,M.length,M[$-1],M[$]]));H.href=T+(T.match(/\?/)===null?"?":"&")+`${X}=${O}`}})},W=(B,z)=>{if(z===void 0||!Array.isArray(z.update))return;if(typeof z.cutoffs_param!=="string"||typeof z.page_param!=="string"){console.warn("Failed Pagy.initKeysetForUI():%o\n bad opts \n%o",B,z);return}const[Q,D]=z.update;let E=Q;if(E===null){let G=localStorage.getItem("maxKey");if(G===null)G="0";const H=parseInt(G)+1;localStorage.setItem("maxKey",H.toString()),E=H.toString(36)}const L=localStorage.getItem(E),M=L===null?[null]:JSON.parse(L);if(D!==void 0)M.splice(...D),localStorage.setItem(E,JSON.stringify(M));const{cutoffs_param:X,page_param:Y}=z;for(let G of B.querySelectorAll("a[href]")){const H=G.href,T=new RegExp(`(?<=\\?.*)${Y}=([\\d]+)`),Z=H.match(T)?.[1];if(typeof Z!=="string")return;const R=parseInt(Z),$=C.safeEncode(JSON.stringify([E,M.length,M[R-1],M[R]]));G.href=H+(H.match(/\?/)===null?"?":"&")+`${X}=${$}`}},J=(B,[z,Q,D,E])=>{const L=B.parentElement??B,M=Object.keys(Q).map((G)=>parseInt(G)).sort((G,H)=>H-G);let X=-1;const Y=(G,H,T)=>G.replace(/__pagy_page__/g,H).replace(/__pagy_label__/g,T);if((B.pagyRender=function(){const G=M.find((R)=>R<L.clientWidth)||0;if(G===X)return;let H=z.before;const T=Q[G.toString()],Z=D?.[G.toString()]??T.map((R)=>R.toString());T.forEach((R,$)=>{const O=Z[$];let j;if(typeof R==="number"){if(j=Y(z.a,R.toString(),O),typeof E?.page_param==="string"&&R===1)j=F(j,E.page_param)}else if(R==="gap")j=z.gap;else j=Y(z.current,R,O);H+=j}),H+=z.after,B.innerHTML="",B.insertAdjacentHTML("afterbegin",H),X=G})(),B.classList.contains("pagy-rjs"))N.observe(L)},S=(B,[z,Q])=>P(B,(D)=>[D,z.replace(/__pagy_page__/,D)],Q),A=(B,[z,Q,D])=>{P(B,(E)=>{const L=Math.max(Math.ceil(z/parseInt(E)),1).toString(),M=Q.replace(/__pagy_page__/,L).replace(/__pagy_limit__/,E);return[L,M]},D)},P=(B,z,Q)=>{const D=B.querySelector("input"),E=B.querySelector("a"),L=D.value,M=function(){if(D.value===L)return;const[X,Y,G]=[D.min,D.value,D.max].map((Z)=>parseInt(Z)||0);if(Y<X||Y>G){D.value=L,D.select();return}let[H,T]=z(D.value);if(typeof Q?.page_param==="string"&&H==="1")T=F(T,Q.page_param);E.href=T,E.click()};["change","focus"].forEach((X)=>D.addEventListener(X,()=>D.select())),D.addEventListener("focusout",M),D.addEventListener("keypress",(X)=>{if(X.key==="Enter")M()})},F=(B,z)=>B.replace(new RegExp(`[?&]${z}=1\\b(?!&)|\\b${z}=1&`),"");return{version:"9.3.3",init(B){const Q=(B instanceof Element?B:document).querySelectorAll("[data-pagy]");for(let D of Q)try{const[E,...L]=JSON.parse(C.decode(D.getAttribute("data-pagy")));if(E==="nav")U(D,L);else if(E==="nav_js")J(D,L);else if(E==="combo_js")S(D,L);else if(E==="selector_js")A(D,L)}catch(E){console.warn("Failed Pagy.init(): %o\n%s",D,E)}}}})();

//# debugId=CB701F69ACE01B4A64756E2164756E21
//# sourceMappingURL=pagy.min.js.map
