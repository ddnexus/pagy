<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="turbo-root" content="/pagy">
    <meta name="turbo-cache-control" content="no-cache" data-turbo-track="reload" data-track-token="3.6.0.786537918750">

    <!-- See retype.com -->
    <meta name="generator" content="Retype 3.6.0">

    <!-- Primary Meta Tags -->
    <title>How To | Pagy</title>
    <meta name="title" content="How To | Pagy">
    <meta name="description" content="This page contains the practical tips and examples to get the job done with Pagy.">

    <!-- Canonical -->
    <link rel="canonical" href="https://ddnexus.github.io/pagy/docs/how-to/">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://ddnexus.github.io/pagy/docs/how-to/">
    <meta property="og:title" content="How To | Pagy">
    <meta property="og:description" content="This page contains the practical tips and examples to get the job done with Pagy.">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://ddnexus.github.io/pagy/docs/how-to/">
    <meta property="twitter:title" content="How To | Pagy">
    <meta property="twitter:description" content="This page contains the practical tips and examples to get the job done with Pagy.">

    <script data-cfasync="false">(function () { var el = document.documentElement, m = localStorage.getItem("doc_theme"), wm = window.matchMedia; if (m === "dark" || (!m && wm && wm("(prefers-color-scheme: dark)").matches)) { el.classList.add("dark") } else { el.classList.remove("dark") } })();</script>

    <link href="../../resources/css/retype.css?v=3.6.0.786537918750" rel="stylesheet">

    <script data-cfasync="false" src="../../resources/js/config.js?v=3.6.0.786537918750" data-turbo-eval="false" defer></script>
    <script data-cfasync="false" src="../../resources/js/retype.js?v=3.6.0" data-turbo-eval="false" defer></script>
    <script id="lunr-js" data-cfasync="false" src="../../resources/js/lunr.js?v=3.6.0.786537918750" data-turbo-eval="false" defer></script>
    <script id="prism-js" data-cfasync="false" src="../../resources/js/prism.js?v=3.6.0.786537918750" defer></script>
</head>
<body>
    <div id="docs-app" class="relative text-base antialiased text-gray-700 bg-white font-body dark:bg-dark-850 dark:text-dark-300">
        <div class="absolute bottom-0 left-0 bg-gray-100 dark:bg-dark-800" style="top: 5rem; right: 50%"></div>
    
        <header id="docs-site-header" class="sticky top-0 z-30 flex w-full h-16 bg-white border-b border-gray-200 md:h-20 dark:bg-dark-850 dark:border-dark-650">
            <div class="container relative flex items-center justify-between pr-6 grow md:justify-start">
                <!-- Mobile menu button skeleton -->
                <button v-cloak class="skeleton docs-mobile-menu-button flex items-center justify-center shrink-0 overflow-hidden dark:text-white focus:outline-none rounded-full w-10 h-10 ml-3.5 md:hidden"><svg xmlns="http://www.w3.org/2000/svg" class="mb-px shrink-0" width="24" height="24" viewBox="0 0 24 24" role="presentation" style="margin-bottom: 0px;"><g fill="currentColor"><path d="M2 4h20v2H2zM2 11h20v2H2zM2 18h20v2H2z"></path></g></svg></button>
                <div v-cloak id="docs-sidebar-toggle"></div>
        
                <!-- Logo -->
                <div class="flex items-center justify-between h-full py-2 md:w-75">
                    <div class="flex items-center px-2 md:px-6">
                        <a id="docs-site-logo" href="../../" class="flex items-center leading-snug text-2xl">
                            <span class="dark:text-white font-semibold line-clamp-1 md:line-clamp-2">Pagy</span>
                        </a><span class="hidden px-2 py-1 ml-4 text-sm font-semibold leading-none text-root-logo-label-text bg-root-logo-label-bg rounded-sm md:inline-block">9.3.2</span>
                    </div>
        
                    <span class="hidden h-8 border-r md:inline-block dark:border-dark-650"></span>
                </div>
        
                <div class="flex justify-between md:grow">
                    <!-- Top Nav -->
                    <nav class="hidden md:flex">
                        <ul class="flex flex-col mb-4 md:pl-16 md:mb-0 md:flex-row md:items-center">
                            <li class="mr-6">
                                <a class="py-2 md:mb-0 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="https://github.com/ddnexus/pagy" target="_blank">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="mb-px mr-1" width="18" height="18" viewBox="0 0 24 24" role="presentation">
                                        <g fill="currentColor">
                                            <symbol id="mark-github-icon-symbol" viewBox="0 0 16 16"><path d="M8 0c4.42 0 8 3.58 8 8a8.013 8.013 0 0 1-5.45 7.59c-.4.08-.55-.17-.55-.38 0-.27.01-1.13.01-2.2 0-.75-.25-1.23-.54-1.48 1.78-.2 3.65-.88 3.65-3.95 0-.88-.31-1.59-.82-2.15.08-.2.36-1.02-.08-2.12 0 0-.67-.22-2.2.82-.64-.18-1.32-.27-2-.27-.68 0-1.36.09-2 .27-1.53-1.03-2.2-.82-2.2-.82-.44 1.1-.16 1.92-.08 2.12-.51.56-.82 1.28-.82 2.15 0 3.06 1.86 3.75 3.64 3.95-.23.2-.44.55-.51 1.07-.46.21-1.61.55-2.33-.66-.15-.24-.6-.83-1.23-.82-.67.01-.27.38.01.53.34.19.73.9.82 1.13.16.45.68 1.31 2.69.94 0 .67.01 1.3.01 1.49 0 .21-.15.45-.55.38A7.995 7.995 0 0 1 0 8c0-4.42 3.58-8 8-8Z"/></symbol><use xlink:href="#mark-github-icon-symbol" />
                                        </g>
                                    </svg>
                                    <span>GitHub</span>
                                </a>
                            </li>
                            <li class="mr-6">
                                <a class="py-2 md:mb-0 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="https://github.com/ddnexus/pagy/issues" target="_blank">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="mb-px mr-1" width="18" height="18" viewBox="0 0 24 24" role="presentation">
                                        <g fill="currentColor">
                                            <path d="M12 1c6.075 0 11 4.925 11 11s-4.925 11-11 11S1 18.075 1 12 5.925 1 12 1ZM2.5 12a9.5 9.5 0 0 0 9.5 9.5 9.5 9.5 0 0 0 9.5-9.5A9.5 9.5 0 0 0 12 2.5 9.5 9.5 0 0 0 2.5 12Zm9.5 2a2 2 0 1 1-.001-3.999A2 2 0 0 1 12 14Z"/>
                                        </g>
                                    </svg>
                                    <span>Issues</span>
                                </a>
                            </li>
                            <li class="mr-6">
                                <a class="py-2 md:mb-0 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="https://github.com/ddnexus/pagy/discussions/categories/q-a" target="_blank">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="mb-px mr-1" width="18" height="18" viewBox="0 0 24 24" role="presentation">
                                        <g fill="currentColor">
                                            <path d="M1.75 1h12.5c.966 0 1.75.784 1.75 1.75v9.5A1.75 1.75 0 0 1 14.25 14H8.061l-2.574 2.573A1.458 1.458 0 0 1 3 15.543V14H1.75A1.75 1.75 0 0 1 0 12.25v-9.5C0 1.784.784 1 1.75 1ZM1.5 2.75v9.5c0 .138.112.25.25.25h2a.75.75 0 0 1 .75.75v2.19l2.72-2.72a.749.749 0 0 1 .53-.22h6.5a.25.25 0 0 0 .25-.25v-9.5a.25.25 0 0 0-.25-.25H1.75a.25.25 0 0 0-.25.25Z"/><path d="M22.5 8.75a.25.25 0 0 0-.25-.25h-3.5a.75.75 0 0 1 0-1.5h3.5c.966 0 1.75.784 1.75 1.75v9.5A1.75 1.75 0 0 1 22.25 20H21v1.543a1.457 1.457 0 0 1-2.487 1.03L15.939 20H10.75A1.75 1.75 0 0 1 9 18.25v-1.465a.75.75 0 0 1 1.5 0v1.465c0 .138.112.25.25.25h5.5a.75.75 0 0 1 .53.22l2.72 2.72v-2.19a.75.75 0 0 1 .75-.75h2a.25.25 0 0 0 .25-.25v-9.5Z"/>
                                        </g>
                                    </svg>
                                    <span>Q&amp;A</span>
                                </a>
                            </li>
                            <li class="mr-6">
                                <a class="py-2 md:mb-0 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="https://github.com/ddnexus/pagy/discussions" target="_blank">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="mb-px mr-1" width="18" height="18" viewBox="0 0 24 24" role="presentation">
                                        <g fill="currentColor">
                                            <path d="M1.75 1h12.5c.966 0 1.75.784 1.75 1.75v9.5A1.75 1.75 0 0 1 14.25 14H8.061l-2.574 2.573A1.458 1.458 0 0 1 3 15.543V14H1.75A1.75 1.75 0 0 1 0 12.25v-9.5C0 1.784.784 1 1.75 1ZM1.5 2.75v9.5c0 .138.112.25.25.25h2a.75.75 0 0 1 .75.75v2.19l2.72-2.72a.749.749 0 0 1 .53-.22h6.5a.25.25 0 0 0 .25-.25v-9.5a.25.25 0 0 0-.25-.25H1.75a.25.25 0 0 0-.25.25Z"/><path d="M22.5 8.75a.25.25 0 0 0-.25-.25h-3.5a.75.75 0 0 1 0-1.5h3.5c.966 0 1.75.784 1.75 1.75v9.5A1.75 1.75 0 0 1 22.25 20H21v1.543a1.457 1.457 0 0 1-2.487 1.03L15.939 20H10.75A1.75 1.75 0 0 1 9 18.25v-1.465a.75.75 0 0 1 1.5 0v1.465c0 .138.112.25.25.25h5.5a.75.75 0 0 1 .53.22l2.72 2.72v-2.19a.75.75 0 0 1 .75-.75h2a.25.25 0 0 0 .25-.25v-9.5Z"/>
                                        </g>
                                    </svg>
                                    <span>Discussions</span>
                                </a>
                            </li>
                            <li class="mr-6">
                                <a class="py-2 md:mb-0 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="https://gurubase.io/g/pagy" target="_blank">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="mb-px mr-1" width="18" height="18" viewBox="0 0 24 24" role="presentation">
                                        <g fill="currentColor">
                                            <path d="M10.25 2a8.25 8.25 0 0 1 6.34 13.53l5.69 5.69a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215l-5.69-5.69A8.25 8.25 0 1 1 10.25 2ZM3.5 10.25a6.75 6.75 0 1 0 13.5 0 6.75 6.75 0 0 0-13.5 0Z"/>
                                        </g>
                                    </svg>
                                    <span>AI Search</span>
                                </a>
                            </li>
        
                        </ul>
                    </nav>
        
                    <!-- Header Right Skeleton -->
                    <div v-cloak class="flex justify-end grow skeleton">
        
                        <!-- Search input mock -->
                        <div class="relative hidden w-40 lg:block lg:max-w-sm lg:ml-auto">
                            <div class="absolute flex items-center justify-center h-full pl-3 dark:text-dark-300">
                                <svg xmlns="http://www.w3.org/2000/svg" class="icon-base" width="16" height="16" viewBox="0 0 24 24" aria-labelledby="icon" role="presentation" style="margin-bottom: 1px;"><g fill="currentColor" ><path d="M21.71 20.29l-3.68-3.68A8.963 8.963 0 0020 11c0-4.96-4.04-9-9-9s-9 4.04-9 9 4.04 9 9 9c2.12 0 4.07-.74 5.61-1.97l3.68 3.68c.2.19.45.29.71.29s.51-.1.71-.29c.39-.39.39-1.03 0-1.42zM4 11c0-3.86 3.14-7 7-7s7 3.14 7 7c0 1.92-.78 3.66-2.04 4.93-.01.01-.02.01-.02.01-.01.01-.01.01-.01.02A6.98 6.98 0 0111 18c-3.86 0-7-3.14-7-7z" ></path></g></svg>
                            </div>
                            <input class="w-full h-10 placeholder-gray-400 transition-colors duration-200 ease-in bg-gray-200 border border-transparent rounded md:text-sm hover:bg-white hover:border-gray-300 focus:outline-none focus:bg-white focus:border-gray-500 dark:bg-dark-600 dark:border-dark-600 dark:placeholder-dark-400" style="padding: 0.625rem 0.75rem 0.625rem 2rem" type="text" placeholder="Search">
                        </div>
        
                        <!-- Mobile search button -->
                        <div class="flex items-center justify-center w-10 h-10 lg:hidden">
                            <svg xmlns="http://www.w3.org/2000/svg" class="shrink-0 icon-base" width="20" height="20" viewBox="0 0 24 24" aria-labelledby="icon" role="presentation" style="margin-bottom: 0px;"><g fill="currentColor" ><path d="M21.71 20.29l-3.68-3.68A8.963 8.963 0 0020 11c0-4.96-4.04-9-9-9s-9 4.04-9 9 4.04 9 9 9c2.12 0 4.07-.74 5.61-1.97l3.68 3.68c.2.19.45.29.71.29s.51-.1.71-.29c.39-.39.39-1.03 0-1.42zM4 11c0-3.86 3.14-7 7-7s7 3.14 7 7c0 1.92-.78 3.66-2.04 4.93-.01.01-.02.01-.02.01-.01.01-.01.01-.01.02A6.98 6.98 0 0111 18c-3.86 0-7-3.14-7-7z" ></path></g></svg>
                        </div>
        
                        <!-- Dark mode switch placeholder -->
                        <div class="w-10 h-10 lg:ml-2"></div>
        
                        <!-- History button -->
                        <div class="flex items-center justify-center w-10 h-10" style="margin-right: -0.625rem;">
                            <svg xmlns="http://www.w3.org/2000/svg" class="shrink-0 icon-base" width="22" height="22" viewBox="0 0 24 24" aria-labelledby="icon" role="presentation" style="margin-bottom: 0px;"><g fill="currentColor" ><g ><path d="M12.01 6.01c-.55 0-1 .45-1 1V12a1 1 0 00.4.8l3 2.22a.985.985 0 001.39-.2.996.996 0 00-.21-1.4l-2.6-1.92V7.01c.02-.55-.43-1-.98-1z"></path><path d="M12.01 1.91c-5.33 0-9.69 4.16-10.05 9.4l-.29-.26a.997.997 0 10-1.34 1.48l1.97 1.79c.19.17.43.26.67.26s.48-.09.67-.26l1.97-1.79a.997.997 0 10-1.34-1.48l-.31.28c.34-4.14 3.82-7.41 8.05-7.41 4.46 0 8.08 3.63 8.08 8.09s-3.63 8.08-8.08 8.08c-2.18 0-4.22-.85-5.75-2.4a.996.996 0 10-1.42 1.4 10.02 10.02 0 007.17 2.99c5.56 0 10.08-4.52 10.08-10.08.01-5.56-4.52-10.09-10.08-10.09z"></path></g></g></svg>
                        </div>
                    </div>
        
                    <div v-cloak class="flex justify-end grow">
                        <div id="docs-mobile-search-button"></div>
                        <doc-search-desktop></doc-search-desktop>
        
                        <doc-theme-switch class="lg:ml-2"></doc-theme-switch>
                        <doc-history></doc-history>
                    </div>
                </div>
            </div>
        </header>
    
        <div class="container relative flex bg-white">
            <!-- Sidebar Skeleton -->
            <div v-cloak class="fixed flex flex-col shrink-0 duration-300 ease-in-out bg-gray-100 border-gray-200 sidebar top-20 w-75 border-r h-screen md:sticky transition-transform skeleton dark:bg-dark-800 dark:border-dark-650">
            
                <!-- Render this div, if config.showSidebarFilter is `true` -->
                <div class="flex items-center h-16 px-6">
                    <input class="w-full h-8 px-3 py-2 transition-colors duration-200 ease-linear bg-white border border-gray-200 rounded shadow-none text-sm focus:outline-none focus:border-gray-600 dark:bg-dark-600 dark:border-dark-600" type="text" placeholder="Filter">
                </div>
            
                <div class="pl-6 mt-1 mb-4">
                    <div class="w-32 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
                    <div class="w-48 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
                    <div class="w-40 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
                    <div class="w-32 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
                    <div class="w-48 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
                    <div class="w-40 h-3 mb-4 bg-gray-200 rounded-full loading dark:bg-dark-600"></div>
                </div>
            
                <div class="shrink-0 mt-auto bg-transparent dark:border-dark-650">
                    <a class="flex items-center justify-center flex-nowrap h-16 text-gray-400 dark:text-dark-400 hover:text-gray-700 dark:hover:text-dark-300 transition-colors duration-150 ease-in docs-powered-by" target="_blank" href="https://retype.com/" rel="noopener">
                        <span class="text-xs whitespace-nowrap">Powered by</span>
                        <svg xmlns="http://www.w3.org/2000/svg" class="ml-2" fill="currentColor" width="96" height="20" overflow="visible"><path d="M0 0v20h13.59V0H0zm11.15 17.54H2.44V2.46h8.71v15.08zM15.8 20h2.44V4.67L15.8 2.22zM20.45 6.89V20h2.44V9.34z"/><g><path d="M40.16 8.44c0 1.49-.59 2.45-1.75 2.88l2.34 3.32h-2.53l-2.04-2.96h-1.43v2.96h-2.06V5.36h3.5c1.43 0 2.46.24 3.07.73s.9 1.27.9 2.35zm-2.48 1.1c.26-.23.38-.59.38-1.09 0-.5-.13-.84-.4-1.03s-.73-.28-1.39-.28h-1.54v2.75h1.5c.72 0 1.2-.12 1.45-.35zM51.56 5.36V7.2h-4.59v1.91h4.13v1.76h-4.13v1.92h4.74v1.83h-6.79V5.36h6.64zM60.09 7.15v7.48h-2.06V7.15h-2.61V5.36h7.28v1.79h-2.61zM70.81 14.64h-2.06v-3.66l-3.19-5.61h2.23l1.99 3.45 1.99-3.45H74l-3.19 5.61v3.66zM83.99 6.19c.65.55.97 1.4.97 2.55s-.33 1.98-1 2.51-1.68.8-3.04.8h-1.23v2.59h-2.06V5.36h3.26c1.42 0 2.45.28 3.1.83zm-1.51 3.65c.25-.28.37-.69.37-1.22s-.16-.92-.48-1.14c-.32-.23-.82-.34-1.5-.34H79.7v3.12h1.38c.68 0 1.15-.14 1.4-.42zM95.85 5.36V7.2h-4.59v1.91h4.13v1.76h-4.13v1.92H96v1.83h-6.79V5.36h6.64z"/></g></svg>
                    </a>
                </div>
            </div>
            
            <!-- Sidebar component -->
            <doc-sidebar v-cloak>
                <template #sidebar-footer>
                    <div class="shrink-0 mt-auto border-t md:bg-transparent md:border-none dark:border-dark-650">
            
                        <div class="py-3 px-6 md:hidden border-b dark:border-dark-650">
                            <nav>
                                <ul class="flex flex-wrap justify-center items-center">
                                    <li class="mr-6">
                                        <a class="block py-1 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="https://github.com/ddnexus/pagy" target="_blank">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="mb-px mr-1" width="18" height="18" viewBox="0 0 24 24" role="presentation">
                                                <g fill="currentColor">
                                                    <symbol id="mark-github-icon-symbol" viewBox="0 0 16 16"><path d="M8 0c4.42 0 8 3.58 8 8a8.013 8.013 0 0 1-5.45 7.59c-.4.08-.55-.17-.55-.38 0-.27.01-1.13.01-2.2 0-.75-.25-1.23-.54-1.48 1.78-.2 3.65-.88 3.65-3.95 0-.88-.31-1.59-.82-2.15.08-.2.36-1.02-.08-2.12 0 0-.67-.22-2.2.82-.64-.18-1.32-.27-2-.27-.68 0-1.36.09-2 .27-1.53-1.03-2.2-.82-2.2-.82-.44 1.1-.16 1.92-.08 2.12-.51.56-.82 1.28-.82 2.15 0 3.06 1.86 3.75 3.64 3.95-.23.2-.44.55-.51 1.07-.46.21-1.61.55-2.33-.66-.15-.24-.6-.83-1.23-.82-.67.01-.27.38.01.53.34.19.73.9.82 1.13.16.45.68 1.31 2.69.94 0 .67.01 1.3.01 1.49 0 .21-.15.45-.55.38A7.995 7.995 0 0 1 0 8c0-4.42 3.58-8 8-8Z"/></symbol><use xlink:href="#mark-github-icon-symbol" />
                                                </g>
                                            </svg>
                                            <span>GitHub</span>
                                        </a>
                                    </li>
                                    <li class="mr-6">
                                        <a class="block py-1 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="https://github.com/ddnexus/pagy/issues" target="_blank">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="mb-px mr-1" width="18" height="18" viewBox="0 0 24 24" role="presentation">
                                                <g fill="currentColor">
                                                    <path d="M12 1c6.075 0 11 4.925 11 11s-4.925 11-11 11S1 18.075 1 12 5.925 1 12 1ZM2.5 12a9.5 9.5 0 0 0 9.5 9.5 9.5 9.5 0 0 0 9.5-9.5A9.5 9.5 0 0 0 12 2.5 9.5 9.5 0 0 0 2.5 12Zm9.5 2a2 2 0 1 1-.001-3.999A2 2 0 0 1 12 14Z"/>
                                                </g>
                                            </svg>
                                            <span>Issues</span>
                                        </a>
                                    </li>
                                    <li class="mr-6">
                                        <a class="block py-1 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="https://github.com/ddnexus/pagy/discussions/categories/q-a" target="_blank">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="mb-px mr-1" width="18" height="18" viewBox="0 0 24 24" role="presentation">
                                                <g fill="currentColor">
                                                    <path d="M1.75 1h12.5c.966 0 1.75.784 1.75 1.75v9.5A1.75 1.75 0 0 1 14.25 14H8.061l-2.574 2.573A1.458 1.458 0 0 1 3 15.543V14H1.75A1.75 1.75 0 0 1 0 12.25v-9.5C0 1.784.784 1 1.75 1ZM1.5 2.75v9.5c0 .138.112.25.25.25h2a.75.75 0 0 1 .75.75v2.19l2.72-2.72a.749.749 0 0 1 .53-.22h6.5a.25.25 0 0 0 .25-.25v-9.5a.25.25 0 0 0-.25-.25H1.75a.25.25 0 0 0-.25.25Z"/><path d="M22.5 8.75a.25.25 0 0 0-.25-.25h-3.5a.75.75 0 0 1 0-1.5h3.5c.966 0 1.75.784 1.75 1.75v9.5A1.75 1.75 0 0 1 22.25 20H21v1.543a1.457 1.457 0 0 1-2.487 1.03L15.939 20H10.75A1.75 1.75 0 0 1 9 18.25v-1.465a.75.75 0 0 1 1.5 0v1.465c0 .138.112.25.25.25h5.5a.75.75 0 0 1 .53.22l2.72 2.72v-2.19a.75.75 0 0 1 .75-.75h2a.25.25 0 0 0 .25-.25v-9.5Z"/>
                                                </g>
                                            </svg>
                                            <span>Q&amp;A</span>
                                        </a>
                                    </li>
                                    <li class="mr-6">
                                        <a class="block py-1 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="https://github.com/ddnexus/pagy/discussions" target="_blank">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="mb-px mr-1" width="18" height="18" viewBox="0 0 24 24" role="presentation">
                                                <g fill="currentColor">
                                                    <path d="M1.75 1h12.5c.966 0 1.75.784 1.75 1.75v9.5A1.75 1.75 0 0 1 14.25 14H8.061l-2.574 2.573A1.458 1.458 0 0 1 3 15.543V14H1.75A1.75 1.75 0 0 1 0 12.25v-9.5C0 1.784.784 1 1.75 1ZM1.5 2.75v9.5c0 .138.112.25.25.25h2a.75.75 0 0 1 .75.75v2.19l2.72-2.72a.749.749 0 0 1 .53-.22h6.5a.25.25 0 0 0 .25-.25v-9.5a.25.25 0 0 0-.25-.25H1.75a.25.25 0 0 0-.25.25Z"/><path d="M22.5 8.75a.25.25 0 0 0-.25-.25h-3.5a.75.75 0 0 1 0-1.5h3.5c.966 0 1.75.784 1.75 1.75v9.5A1.75 1.75 0 0 1 22.25 20H21v1.543a1.457 1.457 0 0 1-2.487 1.03L15.939 20H10.75A1.75 1.75 0 0 1 9 18.25v-1.465a.75.75 0 0 1 1.5 0v1.465c0 .138.112.25.25.25h5.5a.75.75 0 0 1 .53.22l2.72 2.72v-2.19a.75.75 0 0 1 .75-.75h2a.25.25 0 0 0 .25-.25v-9.5Z"/>
                                                </g>
                                            </svg>
                                            <span>Discussions</span>
                                        </a>
                                    </li>
                                    <li class="mr-6">
                                        <a class="block py-1 inline-flex items-center text-sm whitespace-nowrap transition-colors duration-200 ease-linear md:text-blue-500 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200" href="https://gurubase.io/g/pagy" target="_blank">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="mb-px mr-1" width="18" height="18" viewBox="0 0 24 24" role="presentation">
                                                <g fill="currentColor">
                                                    <path d="M10.25 2a8.25 8.25 0 0 1 6.34 13.53l5.69 5.69a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215l-5.69-5.69A8.25 8.25 0 1 1 10.25 2ZM3.5 10.25a6.75 6.75 0 1 0 13.5 0 6.75 6.75 0 0 0-13.5 0Z"/>
                                                </g>
                                            </svg>
                                            <span>AI Search</span>
                                        </a>
                                    </li>
            
                                </ul>
                            </nav>
                        </div>
            
                        <a class="flex items-center justify-center flex-nowrap h-16 text-gray-400 dark:text-dark-400 hover:text-gray-700 dark:hover:text-dark-300 transition-colors duration-150 ease-in docs-powered-by" target="_blank" href="https://retype.com/" rel="noopener">
                            <span class="text-xs whitespace-nowrap">Powered by</span>
                            <svg xmlns="http://www.w3.org/2000/svg" class="ml-2" fill="currentColor" width="96" height="20" overflow="visible"><path d="M0 0v20h13.59V0H0zm11.15 17.54H2.44V2.46h8.71v15.08zM15.8 20h2.44V4.67L15.8 2.22zM20.45 6.89V20h2.44V9.34z"/><g><path d="M40.16 8.44c0 1.49-.59 2.45-1.75 2.88l2.34 3.32h-2.53l-2.04-2.96h-1.43v2.96h-2.06V5.36h3.5c1.43 0 2.46.24 3.07.73s.9 1.27.9 2.35zm-2.48 1.1c.26-.23.38-.59.38-1.09 0-.5-.13-.84-.4-1.03s-.73-.28-1.39-.28h-1.54v2.75h1.5c.72 0 1.2-.12 1.45-.35zM51.56 5.36V7.2h-4.59v1.91h4.13v1.76h-4.13v1.92h4.74v1.83h-6.79V5.36h6.64zM60.09 7.15v7.48h-2.06V7.15h-2.61V5.36h7.28v1.79h-2.61zM70.81 14.64h-2.06v-3.66l-3.19-5.61h2.23l1.99 3.45 1.99-3.45H74l-3.19 5.61v3.66zM83.99 6.19c.65.55.97 1.4.97 2.55s-.33 1.98-1 2.51-1.68.8-3.04.8h-1.23v2.59h-2.06V5.36h3.26c1.42 0 2.45.28 3.1.83zm-1.51 3.65c.25-.28.37-.69.37-1.22s-.16-.92-.48-1.14c-.32-.23-.82-.34-1.5-.34H79.7v3.12h1.38c.68 0 1.15-.14 1.4-.42zM95.85 5.36V7.2h-4.59v1.91h4.13v1.76h-4.13v1.92H96v1.83h-6.79V5.36h6.64z"/></g></svg>
                        </a>
                    </div>
                </template>
            </doc-sidebar>
    
            <div class="grow min-w-0 dark:bg-dark-850">
                <!-- Render "toolbar" template here on api pages --><!-- Render page content -->
                <div class="flex">
                    <div class="min-w-0 p-4 grow md:px-16">
                        <main class="relative pb-12 lg:pt-2">
                            <div class="docs-markdown" id="docs-content">
                                <!-- Rendered if sidebar right is enabled -->
                                <div id="docs-sidebar-right-toggle"></div>
                                <!-- Page content  -->
<doc-anchor-target id="how-to" class="break-words">
    <h1>
        <doc-anchor-trigger class="header-anchor-trigger" to="#how-to">#</doc-anchor-trigger>
        <span>How To</span>
    </h1>
</doc-anchor-target>
<p>This page contains the practical tips and examples to get the job done with Pagy.</p>
<p>You can also <a href="https://gurubase.io/g/pagy">Ask any question to the Pagy trained AI</a> for instant answers not covered in this page.</p>
<doc-anchor-target id="choose-between-offset-countless-or-keyset-pagination">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#choose-between-offset-countless-or-keyset-pagination">#</doc-anchor-trigger>
        <span>Choose between offset, countless or keyset pagination</span>
    </h2>
</doc-anchor-target>
<p><a href="https://gurubase.io/g/pagy/choose-between-pagy-offset-countless-keyset">AI-powered answer</a></p>
<doc-anchor-target id="control-the-items-per-page">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#control-the-items-per-page">#</doc-anchor-trigger>
        <span>Control the items per page</span>
    </h2>
</doc-anchor-target>
<p>You can control the items per page with the <code v-pre>limit</code> variable. (Default <code v-pre>20</code>)</p>
<p>You can set its default in the <code v-pre>pagy.rb</code> initializer (see <a href="../../quick-start/#configure">How to configure pagy</a>). For example:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<div class="codeblock-title">pagy.rb (initializer)</div>
<pre class="language-ruby"><code v-pre class="language-ruby">Pagy::DEFAULT[:limit] = 25</code></pre>
</doc-codeblock></div>
<p>You can also pass it as an instance variable to the <code v-pre>Pagy.new</code> method or to the <code v-pre>pagy</code> controller method:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-ruby"><code v-pre class="language-ruby">@pagy, @records = pagy(Product.all, limit: 30)</code></pre>
</doc-codeblock></div>
<div class="flex mb-6">
    <div class="shrink-0 w-1 rounded-tl rounded-bl bg-yellow-500"></div>
    <div class="flex w-full py-4 border border-l-0 border-gray-300 rounded-tr rounded-br doc-alert bg-white dark:bg-dark-700 dark:border-dark-700" role="alert">
        <div class="flex items-center ml-4 h-7">
            <svg xmlns="http://www.w3.org/2000/svg" class="mb-px text-yellow-500" width="22" height="22" viewBox="0 0 24 24" role="presentation">
                <g fill="currentColor"><g>
                    <path d="M22.48 15.59L14.01 1.45A2.968 2.968 0 0012.16.09c-.78-.19-1.58-.07-2.27.35-.41.25-.76.6-1.01 1.01v.01L.4 15.6c-.83 1.43-.33 3.27 1.1 4.1.45.26.95.4 1.48.4h16.95c.8-.01 1.55-.33 2.11-.9.56-.57.87-1.33.86-2.13a3.04 3.04 0 00-.42-1.48zm-1.87 2.21c-.19.19-.44.3-.69.3H2.99c-.17 0-.34-.05-.49-.13a.992.992 0 01-.37-1.35L10.6 2.48c.08-.14.2-.25.34-.33a.992.992 0 011.37.33l8.46 14.13c.09.15.13.32.13.49 0 .26-.1.51-.29.7z"></path>
                    <path d="M11.45 12.1c.55 0 1-.45 1-1v-4c0-.55-.45-1-1-1s-1 .45-1 1v4c0 .56.45 1 1 1zM11.46 14.1c-.56 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z"></path>
                </g></g>
            </svg>
        </div>
        <div class="pr-5 ml-3 w-full">
            <h5>ActiveRecord <code v-pre>limit</code></h5>
<p>The defined <code v-pre>:limit</code> variable overrides any <code v-pre>limit</code> already set in <code v-pre>ActiveRecord</code> collections:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-ruby"><code v-pre class="language-ruby"># the limit used in the query will be 10
@pagy, @products = pagy(Product.limit(5), limit: 10)</code></pre>
</doc-codeblock></div>
        </div>
    </div>
</div>
<p>See also a couple of extras that handle the <code v-pre>:limit</code> in some special way:</p>
<ul>
<li><a href="../extras/gearbox/">gearbox</a>: Automatically change the limit per page depending on the page number</li>
<li><a href="../extras/limit/">limit</a>: Allow the client to request a custom <code v-pre>:limit</code> (i.e. records per page) with an optional selector UI</li>
</ul>
<doc-anchor-target id="control-the-page-links">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#control-the-page-links">#</doc-anchor-trigger>
        <span>Control the page links</span>
    </h2>
</doc-anchor-target>
<p>You can control the number and position of the page links in the navigation through the <code v-pre>:size</code> variable or override the
<code v-pre>series</code> method.</p>
<doc-panels>
   <doc-panel id="fast-nav" collapsed>
       <template #title>Fast nav</template>
<p>You can set the <code v-pre>:size</code> variable to an Integer representing the maximum page/gap slots rendered. The current page will be placed
as centered as possible in the series. For that reason, <code v-pre>:size</code> works better when it&#x27;s an odd number.</p>
<p>For example:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-ruby"><code v-pre class="language-ruby"># size &lt; 7
pagy = Pagy.new(count: 1000, page: 10, size: 5)
pagy.series
#=&gt; [8, 9, &quot;10&quot;, 11, 12]
pagy = Pagy.new(count: 1000, page: 2, size: 5)
pagy.series
#=&gt; [1, &quot;2&quot;, 3, 4, 5]
pagy = Pagy.new(count: 1000, page: 99, size: 5)
pagy.series
#=&gt; [96, 97, 98, &quot;99&quot;, 100] 

# size &gt;= 7 (first, last and gap added)
pagy = Pagy.new(count: 1000, page: 10, size: 7)
pagy.series
#=&gt; [1, :gap 9, &quot;10&quot;, 11, :gap, 100]
pagy = Pagy.new(count: 1000, page: 2, size: 7)
pagy.series
#=&gt; [1, &quot;2&quot;, 3, 4, 5, :gap, 100]
pagy = Pagy.new(count: 1000, page: 99, size: 7)
pagy.series
#=&gt; [1, :gap, 96, 97, 98, &quot;99&quot;, 100] 

# size &gt;= 7; ends: false (no ends added)
pagy = Pagy.new(count: 1000, page: 10, size: 7, ends: false)
pagy.series
#=&gt; [7, 8, 9, &quot;10&quot;, 11, 12, 13]
pagy = Pagy.new(count: 1000, page: 2, size: 7, ends: false)
pagy.series
#=&gt; [1, &quot;2&quot;, 3, 4, 5, 6, 7]
pagy = Pagy.new(count: 1000, page: 99, size: 7, ends: false)
pagy.series
#=&gt; [94, 95, 96, 97, 98, &quot;99&quot;, 100]</code></pre>
</doc-codeblock></div>
<p>The fast nav uses a simpler and faster algorithm and the series length is more symmetrical and constant, it&#x27;s cleaner and less
confusing to the user. By default, if the size is at least <code v-pre>7</code>, it will insert the first and last pages as first and last links in
the bar, also adding the <code v-pre>:gap</code>s accordingly.</p>
<p>If you want to remove the first, last and gaps slots and show only a series of contiguous pages around the current one you can set
the <code v-pre>:ends</code> variable to <code v-pre>false</code>. This is especially useful with <code v-pre>Calendar</code> nav bars.</p>
   </doc-panel>
   <doc-panel id="legacy-nav" collapsed>
       <template #title>Legacy nav</template>
<p>See the <a href="../extras/size/">size extra</a></p>
   </doc-panel>
   <doc-panel id="skip-the-page-links" collapsed>
       <template #title>Skip the page links</template>
<p>If you want to skip the generation of the page links, just set the <code v-pre>:size</code> variable to <code v-pre>0</code>:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-ruby"><code v-pre class="language-ruby">pagy = Pagy.new count: 1000, size: 0 # etc
pagy.series
#=&gt; []</code></pre>
</doc-codeblock></div>
   </doc-panel>
   <doc-panel id="customize-the-series" collapsed>
       <template #title>Customize the series</template>
<p>If changing the <code v-pre>:size</code> is not enough for your requirements (e.g. if you need to add intermediate segments or midpoints in place
of gaps) you should override the <code v-pre>series</code> method. See more details and examples
<a href="https://github.com/ddnexus/pagy/issues/245">here</a>.</p>
   </doc-panel>
</doc-panels>
<doc-anchor-target id="pass-the-page-number">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#pass-the-page-number">#</doc-anchor-trigger>
        <span>Pass the page number</span>
    </h2>
</doc-anchor-target>
<p>You don&#x27;t need to explicitly pass the page number to the <code v-pre>pagy</code> method, because it is pulled in by the <code v-pre>pagy_get_page</code> (which is
called internally by the <code v-pre>pagy</code> method). However you can force a <code v-pre>page</code> number by just passing it to the <code v-pre>pagy</code> method. For
example:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<div class="codeblock-title">controller</div>
<pre class="language-ruby"><code v-pre class="language-ruby">@pagy, @records = pagy(my_scope, page: 3) # force page #3</code></pre>
</doc-codeblock></div>
<p>That will explicitly set the <code v-pre>:page</code> variable, overriding the default behavior (which pulls the page number from the
<code v-pre>params[:page]</code> by default).</p>
<doc-anchor-target id="customize-the-dictionary">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#customize-the-dictionary">#</doc-anchor-trigger>
        <span>Customize the dictionary</span>
    </h2>
</doc-anchor-target>
<p>Pagy composes its output strings using standard i18n dictionaries. That can be used to change the language and customize your
specific app.</p>
<details>
<summary>Default en dictionary</summary>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-yaml"><code v-pre class="language-yaml"># :one_other pluralization (see https://github.com/ddnexus/pagy/blob/master/gem/lib/pagy/i18n.rb)
en:
  pagy:
    aria_label:
      nav:
        one: &quot;Page&quot;
        other: &quot;Pages&quot;
      prev: &quot;Previous&quot;
      next: &quot;Next&quot;
    prev: &quot;&amp;lt;&quot;
    next: &quot;&amp;gt;&quot;
    gap: &quot;&amp;hellip;&quot;
    item_name:
      one: &quot;item&quot;
      other: &quot;items&quot;
    info:
      no_items: &quot;No %{item_name} found&quot;
      single_page: &quot;Displaying %{count} %{item_name}&quot;
      multiple_pages: &quot;Displaying %{item_name} %{from}-%{to} of %{count} in total&quot;
    combo_nav_js: &quot;Page %{page_input} of %{pages}&quot;
    limit_selector_js: &quot;Show %{limit_input} %{item_name} per page&quot;</code></pre>
</doc-codeblock></div>
</details>
<br>
<p>If you are ok with the default supported locale dictionaries just refer to <a href="../api/i18n/">Pagy::I18n</a>.</p>
<p>If you want to customize the translations or some specific output, you should edit the relevant entries in the pagy dictionary.</p>
<p>If you explicitly use the <a href="../extras/i18n/">i18n extra</a>, override the pagy target entries in your own custom dictionary (refer to
the I18n official documentation).</p>
<p>If you don&#x27;t use the above extra (and rely on the pagy faster code) you can copy and edit the dictionary files that your app uses
and configure pagy to use them.</p>
<div class="codeblock-wrapper"><doc-codeblock>
<div class="codeblock-title">pagy.rb (initializer)</div>
<pre class="language-ruby"><code v-pre class="language-ruby"># load the &quot;en&quot; and &quot;de&quot; locale defined in the custom files at :filepath:
Pagy::I18n.load({ locale: 'de', filepath: 'path/to/my-custom-de.yml' },
                { locale: 'en', filepath: 'path/to/my-custom-en.yml' })</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="customize-the-aria-labels">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#customize-the-aria-labels">#</doc-anchor-trigger>
        <span>Customize the ARIA labels</span>
    </h2>
</doc-anchor-target>
<p>You can customize the <code v-pre>aria-label</code> attributes of all the pagy helpers by passing the <code v-pre>:aria_label</code> string (
See <a href="../api/frontend/#pagy-nav-pagy-vars">pagy_nav</a>)</p>
<p>You can also replace the <code v-pre>pagy.aria_label.nav</code> strings in the dictionary, as well as the <code v-pre>pagy.aria_label.prev</code> and the
<code v-pre>pagy.aria_label.next</code>.</p>
<p>See more details in the <a href="../api/aria/">ARIA attributes Page</a>.</p>
<doc-anchor-target id="customize-the-page-param">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#customize-the-page-param">#</doc-anchor-trigger>
        <span>Customize the page param</span>
    </h2>
</doc-anchor-target>
<p>Pagy uses the <code v-pre>:page_param</code> variable to determine the param it should get the page number from and create the URL for. Its default
is set as <code v-pre>Pagy::DEFAULT[:page_param] = :page</code>, hence it will get the page number from the <code v-pre>params[:page]</code> and will create page
URLs like <code v-pre>./?page=3</code> by default.</p>
<p>You may want to customize that, for example to make it more readable in your language, or because you need to paginate different
collections in the same action. Depending on the scope of the customization, you have a couple of options:</p>
<ol>
<li><code v-pre>Pagy::DEFAULT[:page_param] = :custom_param</code> will be used as the global default</li>
<li><code v-pre>pagy(collection, page_param: :custom_param)</code> or <code v-pre>Pagy.new(count:100, page_param: :custom_param)</code> will be used for a single
instance (overriding the global default)</li>
</ol>
<p>You can also override the <a href="../api/backend/#pagy-get-page-vars">pagy_get_page</a> if you need some special way to get the page
number.</p>
<doc-anchor-target id="customize-the-link-attributes">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#customize-the-link-attributes">#</doc-anchor-trigger>
        <span>Customize the link attributes</span>
    </h2>
</doc-anchor-target>
<p>If you need to customize some HTML attribute of the page links, you may not need to override the <code v-pre>pagy_nav*</code> helper. It might be
enough to pass some extra attribute string with the <code v-pre>:anchor_string</code> keyword argument. For example:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-erb"><code v-pre class="language-erb">&lt;%== pagy_nav(@pagy, anchor_string: 'data-remote=&quot;true&quot;') %&gt;</code></pre>
</doc-codeblock></div>
<p><em>See more advanced details about <a href="../api/frontend/#the-anchor_string-argument">The anchor_string argument</a></em></p>
<doc-anchor-target id="customize-the-params">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#customize-the-params">#</doc-anchor-trigger>
        <span>Customize the params</span>
    </h2>
</doc-anchor-target>
<p>When you need to add some custom param or alter the params embedded in the URLs of the page links, you can set the variable
<code v-pre>:params</code> to a <code v-pre>Hash</code> of params to add to the URL, or a <code v-pre>Proc</code> that can edit/add/delete the request params.</p>
<p>If it is a <code v-pre>Proc</code> it will receive the <strong>key-stringified</strong> <code v-pre>params</code> hash complete with the <code v-pre>page</code> param and it should return a
possibly modified version of it.</p>
<p>An example using <code v-pre>except</code> and <code v-pre>merge!</code>:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<div class="codeblock-title">controller</div>
<pre class="language-ruby"><code v-pre class="language-ruby">@pagy, @records = pagy(collection, params: -&gt;(params) { params.except('not_useful').merge!('custom' =&gt; 'useful') })</code></pre>
</doc-codeblock></div>
<p>You can also use the <code v-pre>:fragment</code> keyword argument to add a fragment to the URLs of the pages:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<div class="codeblock-title">view</div>
<pre class="language-erb"><code v-pre class="language-erb">&lt;%== pagy_nav(@pagy, fragment: '#your-fragment') %&gt;</code></pre>
</doc-codeblock></div>
<div class="flex mb-6">
    <div class="shrink-0 w-1 rounded-tl rounded-bl bg-yellow-500"></div>
    <div class="flex w-full py-4 border border-l-0 border-gray-300 rounded-tr rounded-br doc-alert bg-white dark:bg-dark-700 dark:border-dark-700" role="alert">
        <div class="flex items-center ml-4 h-7">
            <svg xmlns="http://www.w3.org/2000/svg" class="mb-px text-yellow-500" width="22" height="22" viewBox="0 0 24 24" role="presentation">
                <g fill="currentColor"><g>
                    <path d="M22.48 15.59L14.01 1.45A2.968 2.968 0 0012.16.09c-.78-.19-1.58-.07-2.27.35-.41.25-.76.6-1.01 1.01v.01L.4 15.6c-.83 1.43-.33 3.27 1.1 4.1.45.26.95.4 1.48.4h16.95c.8-.01 1.55-.33 2.11-.9.56-.57.87-1.33.86-2.13a3.04 3.04 0 00-.42-1.48zm-1.87 2.21c-.19.19-.44.3-.69.3H2.99c-.17 0-.34-.05-.49-.13a.992.992 0 01-.37-1.35L10.6 2.48c.08-.14.2-.25.34-.33a.992.992 0 011.37.33l8.46 14.13c.09.15.13.32.13.49 0 .26-.1.51-.29.7z"></path>
                    <path d="M11.45 12.1c.55 0 1-.45 1-1v-4c0-.55-.45-1-1-1s-1 .45-1 1v4c0 .56.45 1 1 1zM11.46 14.1c-.56 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z"></path>
                </g></g>
            </svg>
        </div>
        <div class="pr-5 ml-3 w-full">
            <h5>For performance reasons the <code v-pre>:fragment</code> string must include the <code v-pre>&quot;#&quot;</code>!</h5>
        </div>
    </div>
</div>
<doc-anchor-target id="customize-the-url">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#customize-the-url">#</doc-anchor-trigger>
        <span>Customize the URL</span>
    </h2>
</doc-anchor-target>
<p>When you need something more radical with the URL than just massaging the params, you should override the <code v-pre>pagy_url_for</code> right in
your helper.</p>
<p>[!!!warning Override <code v-pre>pagy_trim</code> if using Trim Extra</p>
<p>If you are also using the <a href="../extras/trim/">trim extra</a> you should also override
the <a href="../extras/trim/#pagy-trim-pagy-link">pagy_trim</a>
method or the <code v-pre>Pagy.trim</code> javascript function.</p>
<div class="flex mb-6">
    <div class="shrink-0 w-1 rounded-tl rounded-bl bg-blue-500 dark:bg-blue-400"></div>
    <div class="flex w-full py-4 border border-l-0 border-gray-300 rounded-tr rounded-br doc-alert bg-white dark:bg-dark-700 dark:border-dark-700" role="alert">
        <div class="flex items-center ml-4 h-7">
            <svg xmlns="http://www.w3.org/2000/svg" class="mb-px text-blue-500 dark:text-blue-400" width="22" height="22" viewBox="0 0 24 24" role="presentation">
                <g fill="currentColor"><g>
                    <path d="M12 1C5.93 1 1 5.93 1 12s4.93 11 11 11 11-4.93 11-11S18.07 1 12 1zm0 20c-4.96 0-9-4.04-9-9s4.04-9 9-9 9 4.04 9 9-4.04 9-9 9z"></path>
                    <path d="M12 11c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1s1-.45 1-1v-4c0-.55-.45-1-1-1zM12.01 7c-.56 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z"></path>
                    <path fill="none" d="M0 0h24v24H0z"></path>
                </g></g>
            </svg>
        </div>
        <div class="pr-5 ml-3 w-full">
<p>]()
The following are a couple of examples.</p>
<doc-panels>
   <doc-panel id="enable-fancy-routes" collapsed>
       <template #title>Enable fancy-routes</template>
<p>The following is a Rails-specific alternative that supports fancy-routes (e.g. <code v-pre>get 'your_route(/:page)' ...</code> that produce paths
like <code v-pre>your_route/23</code> instead of <code v-pre>your_route?page=23</code>):</p>
<div class="codeblock-wrapper"><doc-codeblock>
<div class="codeblock-title">controller</div>
<pre class="language-ruby"><code v-pre class="language-ruby">
def pagy_url_for(pagy, page, absolute: false)
  params = request.query_parameters.merge(pagy.vars[:page_param] =&gt; page, only_path: !absolute)
  url_for(params)
end</code></pre>
</doc-codeblock></div>
<div class="flex mb-6">
    <div class="shrink-0 w-1 rounded-tl rounded-bl bg-yellow-500"></div>
    <div class="flex w-full py-4 border border-l-0 border-gray-300 rounded-tr rounded-br doc-alert bg-white dark:bg-dark-700 dark:border-dark-700" role="alert">
        <div class="flex items-center ml-4 h-7">
            <svg xmlns="http://www.w3.org/2000/svg" class="mb-px text-yellow-500" width="22" height="22" viewBox="0 0 24 24" role="presentation">
                <g fill="currentColor"><g>
                    <path d="M22.48 15.59L14.01 1.45A2.968 2.968 0 0012.16.09c-.78-.19-1.58-.07-2.27.35-.41.25-.76.6-1.01 1.01v.01L.4 15.6c-.83 1.43-.33 3.27 1.1 4.1.45.26.95.4 1.48.4h16.95c.8-.01 1.55-.33 2.11-.9.56-.57.87-1.33.86-2.13a3.04 3.04 0 00-.42-1.48zm-1.87 2.21c-.19.19-.44.3-.69.3H2.99c-.17 0-.34-.05-.49-.13a.992.992 0 01-.37-1.35L10.6 2.48c.08-.14.2-.25.34-.33a.992.992 0 011.37.33l8.46 14.13c.09.15.13.32.13.49 0 .26-.1.51-.29.7z"></path>
                    <path d="M11.45 12.1c.55 0 1-.45 1-1v-4c0-.55-.45-1-1-1s-1 .45-1 1v4c0 .56.45 1 1 1zM11.46 14.1c-.56 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z"></path>
                </g></g>
            </svg>
        </div>
        <div class="pr-5 ml-3 w-full">
            <h5>Performance affected!</h5>
<p>The above overridden method is quite slower than the original because it passes through the rails helpers. However that gets
mitigated by the internal usage of <code v-pre>pagy_anchor</code> which calls the method only once even in the presence of many pages.</p>
        </div>
    </div>
</div>
   </doc-panel>
        </div>
    </div>
</div>
<doc-panel id="post-with-page-links" collapsed>
    <template #title>POST with page links</template>
<p>You may need to POST a very complex search form that would generate an URL potentially too long to be handled by a browser, and
your page links may need to use POST and not GET. In that case you can try this simple solution:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<div class="codeblock-title">controller</div>
<pre class="language-ruby"><code v-pre class="language-ruby">
def pagy_url_for(_pagy, page, **_)
  page
end</code></pre>
</doc-codeblock></div>
<p>That would produce links that look like e.g. <code v-pre>&lt;a href=&quot;2&quot;&gt;2&lt;/a&gt;</code>. Then you can attach a javascript &quot;click&quot; event on the page
links. When triggered, the <code v-pre>href</code> content (i.e. the page number) should get copied to a hidden <code v-pre>&quot;page&quot;</code> input and the form should
be posted.</p>
<p>For a broader tutorial about this topic
see <a href="https://benkoshy.github.io/2019/10/09/paginating-search-results-with-a-post-request.html">Handling Pagination When POSTing Complex Search Forms</a>
by Ben Koshy.</p>
</doc-panel>
<doc-anchor-target id="customize-the-item-name">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#customize-the-item-name">#</doc-anchor-trigger>
        <span>Customize the item name</span>
    </h2>
</doc-anchor-target>
<p>The <code v-pre>pagy_info</code> and the <code v-pre>pagy_limit_selector_js</code> helpers use the &quot;item&quot;/&quot;items&quot; generic name in their output. You can change that
by editing the values of the <code v-pre>&quot;pagy.item_name&quot;</code> i18n key in
the <a href="https://github.com/ddnexus/pagy/blob/master/gem/locales">dictionary files</a> that your app is using.</p>
<p>Besides you can also pass the <code v-pre>:item_name</code> by passing an already pluralized string directly to the helper call:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-erb"><code v-pre class="language-erb">&lt;%== pagy_info(@pagy, item_name: t(`activerecord.model.product`, count: @pagy.count) %&gt;
&lt;%== pagy_limit_selector_js(@pagy, item_name: t('activerecord.model.product', count: @pagy.limit) %&gt;</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="customize-css-styles">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#customize-css-styles">#</doc-anchor-trigger>
        <span>Customize CSS styles</span>
    </h2>
</doc-anchor-target>
<p>For all its own interactive helpers the pagy gem includes a few <a href="../api/stylesheets/">stylesheets</a> that you can customize.</p>
<p>Besides that, pagy provides a few frontend extras for <a href="../extras/bootstrap/">bootstrap</a>, <a href="../extras/bulma/">bulma</a>
and <a href="../api/stylesheets/#pagy-tailwind-scss">tailwind</a> that come with a decent styling provided by their respective framework.</p>
<p>If you need to further customize the styles provided by the extras, you don&#x27;t necessary need to override the helpers in most of
them: here are a few alternatives:</p>
<ul>
<li>Check whether the specific extra offers customization (e.g. <a href="../extras/bulma/">bulma</a>)</li>
<li>Define the CSS styles to apply to the pagy CSS classes</li>
<li>If sass/scss is available: extend the pagy CSS classes with some framework defined class, using the <code v-pre>@extend</code> sass/scss
directive</li>
<li>Use the jQuery <code v-pre>addClass</code> method</li>
<li>Use a couple of lines of plain javascript</li>
</ul>
<doc-anchor-target id="override-css-rules-in-element-style-attribute">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#override-css-rules-in-element-style-attribute">#</doc-anchor-trigger>
        <span>Override CSS rules in element &quot;style&quot; attribute</span>
    </h2>
</doc-anchor-target>
<p>In order to get a decent default look, a couple of helpers (i.e. <code v-pre>pagy*_combo_nav_js</code>, <code v-pre>pagy_limit_selector_js</code>) assign element
style attributes to one or more tags. You can override their rules in your own stylesheets by using the attribute <code v-pre>[style]</code>
selector and <code v-pre>!important</code>. Here is an example for overriding the <code v-pre>width</code> of the <code v-pre>input</code> element:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-css"><code v-pre class="language-css">.pagy input[style] {
  /* This is just for the sake of demo: indeed the width is already calculated and assigned dynamically 
     considering the total number of digits that may appear in the input, so you should not need to override it */
  width: 5rem !important;
}</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="override-pagy-methods">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#override-pagy-methods">#</doc-anchor-trigger>
        <span>Override pagy methods</span>
    </h2>
</doc-anchor-target>
<p>You include the pagy modules in your controllers and helpers, so if you want to override any of them, you can redefine them right
in your code, where you included them.</p>
<p>You can read more details in the
nice <a href="https://benkoshy.github.io/2020/02/01/overriding-pagy-methods.html">How to Override pagy methods only in specific circumstances</a>
mini-post by Ben Koshy.</p>
<p>Also, consider that you can use <code v-pre>prepend</code> if you need to do it globally:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-ruby"><code v-pre class="language-ruby">
module MyOverridingModule
  def pagy_any_method
    #...
    super
    #...
  end
end
Pagy::Backend.prepend MyOverridingModule
# and/or
Pagy::Frontend.prepend MyOverridingModule</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="override-pagy_get_count-use-count_documents-with-mongoid">
    <h3>
        <doc-anchor-trigger class="header-anchor-trigger" to="#override-pagy_get_count-use-count_documents-with-mongoid">#</doc-anchor-trigger>
        <span>Override <code v-pre>pagy_get_count</code>: use <code v-pre>count_documents</code> with Mongoid</span>
    </h3>
</doc-anchor-target>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-ruby"><code v-pre class="language-ruby"># e.g. applicaton_controller.rb
def pagy_get_count(collection, vars)
  collection.respond_to?(:count_documents) ? collection.count_documents : super
end</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="paginate-an-array">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#paginate-an-array">#</doc-anchor-trigger>
        <span>Paginate an Array</span>
    </h2>
</doc-anchor-target>
<p>See the <a href="../extras/array/">array</a> extra.</p>
<doc-anchor-target id="paginate-activerecord-collections">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#paginate-activerecord-collections">#</doc-anchor-trigger>
        <span>Paginate ActiveRecord collections</span>
    </h2>
</doc-anchor-target>
<p>Pagy works out of the box with <code v-pre>ActiveRecord</code> collections, however here are a few specific cases that might be treated
differently:</p>
<doc-panels>
   <doc-panel id="grouped-collection" collapsed>
       <template #title>Grouped collection</template>
<p>For better performance of grouped ActiveRecord collection counts, you may want to take a look at the <a href="../extras/arel/">arel extra</a>.</p>
   </doc-panel>
   <doc-panel id="decorated-collection" collapsed>
       <template #title>Decorated collection</template>
<p>Do it in 2 steps: first get the page of records without decoration, and then apply the decoration to it. For example:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<div class="codeblock-title">controller</div>
<pre class="language-ruby"><code v-pre class="language-ruby">@pagy, records     = pagy(Post.all)
@decorated_records = records.decorate # or YourDecorator.method(records) whatever works</code></pre>
</doc-codeblock></div>
   </doc-panel>
   <doc-panel id="custom-scope-count" collapsed>
       <template #title>Custom scope/count</template>
<p>Your scope might become complex and the default pagy <code v-pre>collection.count(:all)</code> may not get the actual count. In that case you can
get the right count in a couple of ways:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<div class="codeblock-title">controller</div>
<pre class="language-ruby"><code v-pre class="language-ruby"># Passing the right arguments to the internal `collection.count(...)` (See the ActiveRecord documentation for details)
@pagy, @records = pagy(custom_scope, count_args: [:join])

# or directly pass the right count to pagy (that will directly use it skipping its own `collection.count(:all)`)
@pagy, @records = pagy(custom_scope, count: custom_count)</code></pre>
</doc-codeblock></div>
   </doc-panel>
   <doc-panel id="ransack-results" collapsed>
       <template #title>Ransack results</template>
<p>Ransack <code v-pre>result</code> returns an <code v-pre>ActiveRecord</code> collection, which can be paginated out of the box. For example:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<div class="codeblock-title">controller</div>
<pre class="language-ruby"><code v-pre class="language-ruby">q              = Person.ransack(params[:q])
@pagy, @people = pagy(q.result)</code></pre>
</doc-codeblock></div>
   </doc-panel>
   <doc-panel id="postgresql-collections" collapsed>
       <template #title>PostgreSQL Collections</template>
<p><a href="../troubleshooting/#records-may-randomly-repeat-in-different-pages-or-be-missing">Always order your collections!</a></p>
   </doc-panel>
</doc-panels>
<doc-anchor-target id="paginate-for-generic-api-clients">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#paginate-for-generic-api-clients">#</doc-anchor-trigger>
        <span>Paginate for generic API clients</span>
    </h2>
</doc-anchor-target>
<p>When your app is a service that doesn&#x27;t need to serve any UI, but provides an API to some sort of client, you can serve the
pagination metadata as HTTP headers added to your response.</p>
<p>In that case you don&#x27;t need the <code v-pre>Pagy::Frontend</code> nor any frontend extra. You may not even need the standard pagination, but use
the <a href="../api/keyset/">Pagy::Keyset</a> pagination. Anyway you may want to use the <a href="../extras/headers/">headers extra</a> and use its
helpers to add the headers to your responses, and other useful backend extras like the <a href="../extras/limit/">limit extra</a> and
the <a href="../extras/jsonapi/">jsonapi extra</a>.</p>
<doc-anchor-target id="paginate-with-jsonapi">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#paginate-with-jsonapi">#</doc-anchor-trigger>
        <span>Paginate with JSON:API</span>
    </h2>
</doc-anchor-target>
<p>See the <a href="../extras/jsonapi/">jsonapi extra</a>.</p>
<doc-anchor-target id="paginate-for-javascript-frameworks">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#paginate-for-javascript-frameworks">#</doc-anchor-trigger>
        <span>Paginate for Javascript Frameworks</span>
    </h2>
</doc-anchor-target>
<p>If your app uses ruby as pure backend and some javascript frameworks as the frontend (e.g. Vue.js, react.js, ...), then you may
want to generate the whole pagination UI directly in javascript (with your own code or using some available javascript module).</p>
<p>In that case you don&#x27;t need the <code v-pre>Pagy::Frontend</code> nor any frontend extra. You should only require
the <a href="../extras/metadata/">metadata extra</a> and pass the pagination metadata in your JSON response.</p>
<doc-anchor-target id="paginate-search-framework-results">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#paginate-search-framework-results">#</doc-anchor-trigger>
        <span>Paginate search framework results</span>
    </h2>
</doc-anchor-target>
<p>Pagy has a few extras dedicated to gems returning search results:</p>
<ul>
<li><a href="../extras/elasticsearch_rails/">elasticsearch_rails</a></li>
<li><a href="../extras/searchkick/">searchkick</a></li>
<li><a href="../extras/meilisearch/">meilisearch</a></li>
</ul>
<doc-anchor-target id="paginate-by-id-instead-of-offset">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#paginate-by-id-instead-of-offset">#</doc-anchor-trigger>
        <span>Paginate by id instead of offset</span>
    </h2>
</doc-anchor-target>
<p>With particular requirements/environment an id-based pagination might work better than a classical offset-based pagination, You
can use an interesting approach proposed <a href="https://github.com/ddnexus/pagy/discussions/435#discussioncomment-4577136">here</a>.</p>
<doc-anchor-target id="paginate-by-date">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#paginate-by-date">#</doc-anchor-trigger>
        <span>Paginate by date</span>
    </h2>
</doc-anchor-target>
<p>Use the <a href="../extras/calendar/">calendar extra</a> that adds pagination filtering by calendar time unit (year, quarter, month, week,
day).</p>
<doc-anchor-target id="paginate-multiple-independent-collections">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#paginate-multiple-independent-collections">#</doc-anchor-trigger>
        <span>Paginate multiple independent collections</span>
    </h2>
</doc-anchor-target>
<p>By default pagy tries to derive parameters and variables from the request and the collection, so you don&#x27;t have to explicitly pass
it to the <code v-pre>pagy*</code> method. That is very handy, but assumes you are paginating a single collection per request.</p>
<p>When you need to paginate multiple collections in a single request, you need to explicitly differentiate the pagination objects.
You have the following common ways to do so:</p>
<doc-panels>
   <doc-panel id="pass-the-request-path" collapsed>
       <template #title>Pass the request path</template>
<p>By default pagy generates its links reusing the same <code v-pre>request_path</code> of the request, however if you want to generate links pointing
to a different controller/path, you should explicitly pass the targeted <code v-pre>:request_path</code>. For example:</p>
<doc-tabs>
<doc-tab v-cloak id="good">
<template #title>Good</template>
<div class="flex mb-6">
    <div class="shrink-0 w-1 rounded-tl rounded-bl bg-green-500"></div>
    <div class="flex w-full py-4 border border-l-0 border-gray-300 rounded-tr rounded-br doc-alert bg-white dark:bg-dark-700 dark:border-dark-700" role="alert">
        <div class="flex items-center ml-4 h-7">
            <svg xmlns="http://www.w3.org/2000/svg" class="mb-px text-green-500" width="22" height="22" viewBox="0 0 24 24" role="presentation">
                <g fill="currentColor"><g>
                    <path d="M21 9.09c-.55 0-1 .45-1 1v.92c0 4.96-4.04 8.99-9 8.99-4.97 0-9-4.04-9-9s4.04-9 9-9c1.27 0 2.5.26 3.66.78.51.22 1.1 0 1.32-.51.23-.5 0-1.1-.51-1.32C14.06.32 12.56 0 11.01 0H11C4.94 0 0 4.93 0 10.99 0 17.06 4.93 22 10.99 22H11c6.06 0 11-4.93 11-10.99v-.92c0-.56-.45-1-1-1z"></path>
                    <path d="M8.71 9.31a.996.996 0 10-1.41 1.41l3 3c.19.19.44.29.71.29.27 0 .52-.11.71-.29l10-10.01a.996.996 0 10-1.41-1.41L11 11.6 8.71 9.31z"></path>
                </g></g>
            </svg>
        </div>
        <div class="pr-5 ml-3 w-full">
            <h5>Request Path Passed In:</h5>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-ruby"><code v-pre class="language-ruby"># dashboard_controller
def index
  @pagy_foos, @foos = pagy(Foo.all, request_path: '/foos')
  @pagy_bars, @bars = pagy(Bar.all, request_path: '/bars')
end</code></pre>
</doc-codeblock></div>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-erb"><code v-pre class="language-erb">&lt;-- /dashboard.html.erb --&gt;
&lt;%== pagy_nav(@pagy_foos) %&gt;
&lt;%== pagy_nav(@pagy_bars) %&gt;
&lt;-- Pagination links of `/foos?page=2` instead of `/dashboard?page=2` --&gt;
&lt;-- Pagination links of `/bars?page=2` etc. --&gt;
&lt;-- Success --&gt;</code></pre>
</doc-codeblock></div>
        </div>
    </div>
</div>
</doc-tab>
<doc-tab v-cloak id="bad">
<template #title>Bad</template>
<div class="flex mb-6">
    <div class="shrink-0 w-1 rounded-tl rounded-bl bg-red-500"></div>
    <div class="flex w-full py-4 border border-l-0 border-gray-300 rounded-tr rounded-br doc-alert bg-white dark:bg-dark-700 dark:border-dark-700" role="alert">
        <div class="flex items-center ml-4 h-7">
            <svg xmlns="http://www.w3.org/2000/svg" class="mb-px text-red-500" width="22" height="22" viewBox="0 0 24 24" role="presentation">
                <g fill="currentColor"><g>
                    <path d="M21.71 6.15L15.85.29c-.19-.18-.44-.29-.71-.29H6.86c-.27 0-.52.11-.71.29L.29 6.15c-.18.19-.29.44-.29.71v8.28c0 .27.11.52.29.71l5.86 5.86c.19.18.44.29.71.29h8.28c.27 0 .52-.11.71-.29l5.86-5.86a.99.99 0 00.29-.71V6.86c0-.27-.11-.52-.29-.71zM20 14.73L14.73 20H7.27L2 14.73V7.27L7.27 2h7.45L20 7.27v7.46z"></path>
                    <path d="M11 12c.55 0 1-.45 1-1V7c0-.55-.45-1-1-1s-1 .45-1 1v4c0 .55.45 1 1 1zM11.01 14c-.56 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z"></path>
                </g></g>
            </svg>
        </div>
        <div class="pr-5 ml-3 w-full">
            <h5>No Path Passed In</h5>
<p>Path customization typically required when rendering multiple <code v-pre>@pagy</code> instances in the same view. e.g.:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-ruby"><code v-pre class="language-ruby"># dashboard_controller
def index
  @pagy_foos, @foos = pagy(Foo.all)
  @pagy_bars, @bars = pagy(Bars.all)
end</code></pre>
</doc-codeblock></div>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-erb"><code v-pre class="language-erb">&lt;-- /dashboard.html.erb --&gt;
&lt;% turbo_frame &quot;foos&quot; do %&gt;
&lt;%== pagy_nav(@pagy_foos) %&gt;
&lt;% end%&gt;
&lt;% turbo_frame &quot;bars&quot; do %&gt;
&lt;%== pagy_nav(@pagy_bars) %&gt;
&lt;% end%&gt;
&lt;-- Pagination links will be `/dashboard?page=2` --&gt;
&lt;-- We don't want that! --&gt;</code></pre>
</doc-codeblock></div>
        </div>
    </div>
</div>
</doc-tab>
</doc-tabs>
   </doc-panel>
   <doc-panel id="use-separate-turbo-frames-actions" collapsed>
       <template #title>Use separate turbo frames actions</template>
<p>If you&#x27;re using <a href="https://hotwired.dev/">hotwire</a> (<a href="https://github.com/hotwired/turbo-rails">turbo-rails</a> being the Rails
implementation), another way of maintaining independent contexts is using separate turbo frames actions. Just wrap each
independent context in a <code v-pre>turbo_frame_tag</code> and ensure a matching <code v-pre>turbo_frame_tag</code> is returned:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-erb"><code v-pre class="language-erb">  &lt;-- movies/index.html.erb --&gt;
  
  &lt;-- movies#bad_movies --&gt;
  &lt;%= turbo_frame_tag &quot;bad_movies&quot;, src: bad_movies_path do %&gt;    
      &lt;%= render &quot;movies_table&quot;, locals: {movies: @movies}%&gt;
      &lt;%== pagy_bootstrap_nav(@pagy) %&gt;    
  &lt;% end %&gt;

  &lt;-- movies#good_movies --&gt;
  &lt;%= turbo_frame_tag &quot;good_movies&quot;, src: good_movies_path  do %&gt;    
      &lt;%= render &quot;movies_table&quot;, locals: {movies: @movies}%&gt;
      &lt;%== pagy_bootstrap_nav(@pagy) %&gt;    
  &lt;% end %&gt;   </code></pre>
</doc-codeblock></div>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-ruby"><code v-pre class="language-ruby">  # controller action 
def good
  @pagy, @movies = pagy(Movie.good, limit: 5)
end

def bad
  @pagy, @movies = pagy(Movie.bad, limit: 5)
end </code></pre>
</doc-codeblock></div>
<p>Consider <a href="https://bhserna.com/building-data-grid-with-search-rails-hotwire-ransack.html">Benito Serna&#x27;s implementation of turbo-frames (on Rails) using search forms with the Ransack gem</a>
along with a corresponding <a href="https://github.com/bhserna/dynamic_data_grid_hotwire_ransack">demo app</a> for a similar implementation
of the above logic.</p>
   </doc-panel>
   <doc-panel id="use-different-page-param-s" collapsed>
       <template #title>Use different page_param(s)</template>
<p>You can also
paginate <a href="https://www.imaginarycloud.com/blog/how-to-paginate-ruby-on-rails-apps-with-pagy/">multiple model in the same request</a>
by simply using multiple <code v-pre>:page_param</code>:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-ruby"><code v-pre class="language-ruby">
def index # controller action
  @pagy_stars, @stars     = pagy(Star.all, page_param: :page_stars)
  @pagy_nebulae, @nebulae = pagy(Nebula.all, page_param: :page_nebulae)
end</code></pre>
</doc-codeblock></div>
   </doc-panel>
</doc-panels>
<doc-anchor-target id="wrap-existing-pagination-with-pagy_calendar">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#wrap-existing-pagination-with-pagy_calendar">#</doc-anchor-trigger>
        <span>Wrap existing pagination with pagy_calendar</span>
    </h2>
</doc-anchor-target>
<p>You can easily wrap your existing pagination with the <code v-pre>pagy_calendar</code> method. Here are a few examples adding <code v-pre>:year</code> and <code v-pre>:month</code>
to different existing statements.</p>
<div class="codeblock-wrapper"><doc-codeblock>
<div class="codeblock-title">controller</div>
<pre class="language-ruby"><code v-pre class="language-ruby"># pagy without calendar
@pagy, @record = pagy(collection, any_vars: value, ...)
# wrapped with pagy_calendar
@calendar, @pagy, @records = pagy_calendar(collection,
                                           year:  {},
                                           month: {},
                                           pagy:  { any_vars: value, ... })

# any other backend constructors (e.g. pagy_searchkick)
@pagy, @record = pagy_searchkick(pagy_search_args, any_vars: value, ...)
# wrapped with pagy_calendar
@calendar, @pagy, @records = pagy_calendar(pagy_search_args,
                                           year:  {},
                                           month: {},
                                           pagy:  { backend:  :pagy_searchkick,
                                                    any_vars: value, ... })</code></pre>
</doc-codeblock></div>
<p>Then follow the <a href="../extras/calendar/">calendar extra documentation</a> for more details.</p>
<doc-anchor-target id="paginate-only-max_pages-regardless-the-count">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#paginate-only-max_pages-regardless-the-count">#</doc-anchor-trigger>
        <span>Paginate only max_pages, regardless the count</span>
    </h2>
</doc-anchor-target>
<p>In order to limit the pagination to a maximum number of pages, you can pass the <code v-pre>:max_pages</code> variable.</p>
<p>For example:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-ruby"><code v-pre class="language-ruby">@pagy, @records = pagy(collection, max_pages: 50, limit: 20)
@records.size #=&gt; 20   
@pagy.count #=&gt; 10_000
@pagy.last #=&gt; 50

@pagy, @records = pagy(collection, max_pages: 50, limit: 20, page: 51)
#=&gt; Pagy::OverflowError: expected :page in 1..50; got 51</code></pre>
</doc-codeblock></div>
<p>If the <code v-pre>@pagy.count</code> in the example is <code v-pre>10_000</code>, the pages served without <code v-pre>:max_pages</code> would be <code v-pre>500</code>, but with
<code v-pre>:max_pages: 50</code> pagy would serve only the first <code v-pre>50</code> pages of your collection.</p>
<p>That works at the <code v-pre>Pagy</code>/<code v-pre>Pagy::Countless</code> level, so it works with any combination of collection/extra, including <code v-pre>limit</code>,
<code v-pre>gearbox</code> and search extras, however it makes no sense in <code v-pre>Pagy::Calendar</code> unit objects (which ignore it).</p>
<div class="flex mb-6">
    <div class="shrink-0 w-1 rounded-tl rounded-bl bg-blue-500 dark:bg-blue-400"></div>
    <div class="flex w-full py-4 border border-l-0 border-gray-300 rounded-tr rounded-br doc-alert bg-white dark:bg-dark-700 dark:border-dark-700" role="alert">
        <div class="flex items-center ml-4 h-7">
            <svg xmlns="http://www.w3.org/2000/svg" class="mb-px text-blue-500 dark:text-blue-400" width="22" height="22" viewBox="0 0 24 24" role="presentation">
                <g fill="currentColor"><g>
                    <path d="M12 1C5.93 1 1 5.93 1 12s4.93 11 11 11 11-4.93 11-11S18.07 1 12 1zm0 20c-4.96 0-9-4.04-9-9s4.04-9 9-9 9 4.04 9 9-4.04 9-9 9z"></path>
                    <path d="M12 11c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1s1-.45 1-1v-4c0-.55-.45-1-1-1zM12.01 7c-.56 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z"></path>
                    <path fill="none" d="M0 0h24v24H0z"></path>
                </g></g>
            </svg>
        </div>
        <div class="pr-5 ml-3 w-full">
            <h5>Notice</h5>
<p>The <code v-pre>limit</code> and <code v-pre>gearbox</code> extras serve a variable number of records per page. If your goal is limiting the pagination to a max
number of records (instead of pages), you have to keep into account how you configure the <code v-pre>limit</code> range.</p>
        </div>
    </div>
</div>
<doc-anchor-target id="paginate-pre-offset-and-pre-limited-collections">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#paginate-pre-offset-and-pre-limited-collections">#</doc-anchor-trigger>
        <span>Paginate pre-offset and pre-limited collections</span>
    </h2>
</doc-anchor-target>
<p>With the other pagination gems you cannot paginate a subset of a collection that you got using <code v-pre>offset</code> and <code v-pre>limit</code>. With Pagy it
is as simple as just adding the <code v-pre>:outset</code> variable, set to the initial offset. For example:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<div class="codeblock-title">controller</div>
<pre class="language-ruby"><code v-pre class="language-ruby">subset                   = Product.offset(100).limit(315)
@pagy, @paginated_subset = pagy(subset, outset: 100)</code></pre>
</doc-codeblock></div>
<p>Assuming the <code v-pre>:limit</code> default of <code v-pre>20</code>, you will get the pages with the records you are expecting. The first page from record 101
to 120 of the main collection, and the last page from 401 to 415 of the main collection. Besides the <code v-pre>from</code> and <code v-pre>to</code> attribute
readers will correctly return the numbers relative to the subset that you are paginating, i.e. from 1 to 20 for the first page and
from 301 to 315 for the last page.</p>
<doc-anchor-target id="paginate-non-activerecord-collections">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#paginate-non-activerecord-collections">#</doc-anchor-trigger>
        <span>Paginate non-ActiveRecord collections</span>
    </h2>
</doc-anchor-target>
<p>The <code v-pre>pagy_get_count</code> method works out of the box with <code v-pre>ActiveRecord</code> collections; for other collections (e.g. <code v-pre>mongoid</code>, etc.)
you might want to change the <code v-pre>:count_args</code> default to suite your ORM count method:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<div class="codeblock-title">pagy.rb (initializer)</div>
<pre class="language-ruby"><code v-pre class="language-ruby">Pagy::DEFAULT[:count_args] = []</code></pre>
</doc-codeblock></div>
<p>or in extreme cases you may need to override it in your controller.</p>
<doc-anchor-target id="paginate-collections-with-metadata">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#paginate-collections-with-metadata">#</doc-anchor-trigger>
        <span>Paginate collections with metadata</span>
    </h2>
</doc-anchor-target>
<p>When your collection is already paginated and contains count and pagination metadata, you don&#x27;t need any <code v-pre>pagy*</code> controller
method. For example this is a Tmdb API search result object, but you can apply the same principle to any other type of collection
metadata:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-ruby"><code v-pre class="language-ruby">#&lt;Tmdb::Result page=1, total_pages=23, total_results=446, results=[#&lt;Tmdb::Movie ..&gt;,#&lt;Tmdb::Movie...&gt;,...]...&gt;</code></pre>
</doc-codeblock></div>
<p>As you can see, it contains the pagination metadata that you can use to setup the pagination with pagy:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<div class="codeblock-title">controller</div>
<pre class="language-ruby"><code v-pre class="language-ruby"># get the paginated collection
tobj = Tmdb::Search.movie(&quot;Harry Potter&quot;, page: params[:page])
# use its count and page to initialize the @pagy object
@pagy = Pagy.new(count: tobj.total_results, page: tobj.page)
# set the paginated collection records
@movies = tobj.results</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="paginate-any-collection">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#paginate-any-collection">#</doc-anchor-trigger>
        <span>Paginate Any Collection</span>
    </h2>
</doc-anchor-target>
<p>Pagy doesn&#x27;t need to know anything about the kind of collection you paginate. It can paginate any collection, because every
collection knows its count and has a way to extract a chunk of items given a start/offset and a per-page/limit. It does not matter
if it is an <code v-pre>Array</code> or an <code v-pre>ActiveRecord</code> scope or something else: the simple mechanism is the same:</p>
<ol>
<li>Create a Pagy object using the count of the collection to paginate</li>
<li>Get the page of items from the collection using the start/offset and the per-page/limit (<code v-pre>pagy.offset</code> and <code v-pre>pagy.limit</code>)</li>
</ol>
<p>Here is an example with an array. (Please, notice that this is only a convenient example, but you should use
the <a href="../extras/array/">array</a> extra to paginate arrays).</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-ruby"><code v-pre class="language-ruby"># paginate an array
arr = (1..1000).to_a

# Create a Pagy object using the count of the collection to paginate
pagy = Pagy.new(count: arr.count, page: 2)
#=&gt; #&lt;Pagy:0x000055e39d8feef0 ... &gt;

# Get the page using `pagy.offset` and `pagy.limit`
paginated = arr[pagy.offset, pagy.limit]
#=&gt; [21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40]</code></pre>
</doc-codeblock></div>
<p>This is basically what the <code v-pre>pagy</code> method included in your controller does for you in one go:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<div class="codeblock-title">controller</div>
<pre class="language-ruby"><code v-pre class="language-ruby">@pagy, @products = pagy(Product.some_scope)</code></pre>
</doc-codeblock></div>
<p>Then of course, regardless the kind of collection, you can render the navigation links in your view:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<div class="codeblock-title">view</div>
<pre class="language-erb"><code v-pre class="language-erb">&lt;%== pagy_nav(@pagy) %&gt;</code></pre>
</doc-codeblock></div>
<p>See the <a href="../api/backend/">Pagy::Backend API documentation</a> for more details.</p>
<doc-anchor-target id="use-the-pagy_nav-helpers">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#use-the-pagy_nav-helpers">#</doc-anchor-trigger>
        <span>Use the pagy_nav* helpers</span>
    </h2>
</doc-anchor-target>
<p>These helpers take the Pagy object and return the HTML string with the pagination links, which are wrapped in a <code v-pre>nav</code> tag and are
ready to use in your view. For example:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<div class="codeblock-title">view</div>
<pre class="language-erb"><code v-pre class="language-erb">&lt;%== pagy_nav(@pagy) %&gt;</code></pre>
</doc-codeblock></div>
<div class="flex mb-6">
    <div class="shrink-0 w-1 rounded-tl rounded-bl bg-blue-500 dark:bg-blue-400"></div>
    <div class="flex w-full py-4 border border-l-0 border-gray-300 rounded-tr rounded-br doc-alert bg-white dark:bg-dark-700 dark:border-dark-700" role="alert">
        <div class="flex items-center ml-4 h-7">
            <svg xmlns="http://www.w3.org/2000/svg" class="mb-px text-blue-500 dark:text-blue-400" width="22" height="22" viewBox="0 0 24 24" role="presentation">
                <g fill="currentColor"><g>
                    <path d="M12 1C5.93 1 1 5.93 1 12s4.93 11 11 11 11-4.93 11-11S18.07 1 12 1zm0 20c-4.96 0-9-4.04-9-9s4.04-9 9-9 9 4.04 9 9-4.04 9-9 9z"></path>
                    <path d="M12 11c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1s1-.45 1-1v-4c0-.55-.45-1-1-1zM12.01 7c-.56 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z"></path>
                    <path fill="none" d="M0 0h24v24H0z"></path>
                </g></g>
            </svg>
        </div>
        <div class="pr-5 ml-3 w-full">
            <h5>Extras Provide Added Functionality</h5>
<p>The <a href="../../categories/frontend/">frontend extras</a> add a few other helpers that you can use the same way, in order to get added features</p>
        </div>
    </div>
</div>
<doc-anchor-target id="skip-single-page-navs">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#skip-single-page-navs">#</doc-anchor-trigger>
        <span>Skip single page navs</span>
    </h2>
</doc-anchor-target>
<p>Unlike other gems, Pagy does not decide for you that the nav of a single page of results must not be rendered. You may want it
rendered... or maybe you don&#x27;t. If you don&#x27;t... wrap it in a condition and use the <code v-pre>pagy_nav*</code> only if <code v-pre>@pagy.pages &gt; 1</code> is true.
For example:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-erb"><code v-pre class="language-erb">&lt;%== pagy_nav(@pagy) if @pagy.pages &gt; 1 %&gt;</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="skip-page1-param">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#skip-page1-param">#</doc-anchor-trigger>
        <span>Skip page=1 param</span>
    </h2>
</doc-anchor-target>
<p>By default Pagy generates all the page links including the <code v-pre>page</code> param. If you want to remove the <code v-pre>page=1</code> param from the first
page link, just require the <a href="../extras/trim/">trim extra</a>.</p>
<doc-anchor-target id="deal-with-a-slow-collection-count">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#deal-with-a-slow-collection-count">#</doc-anchor-trigger>
        <span>Deal with a slow collection COUNT(*)</span>
    </h2>
</doc-anchor-target>
<p>Every pagination gem needs the collection count in order to calculate <em>all</em> the other variables involved in the pagination. If you
use a storage system like any SQL DB, there is no way to paginate and provide a full nav system without executing an extra query
to get the collection count. That is usually not a problem if your DB is well organized and maintained, but that may not be always
the case.</p>
<p>Sometimes you may have to deal with not very efficient legacy apps/DBs that you cannot totally control. In that case the extra
count query may affect the performance of the app quite badly.</p>
<p>You have 2 possible solutions in order to improve the performance.</p>
<doc-panels>
   <doc-panel id="cache-the-count" collapsed>
       <template #title>Cache the count</template>
<p>Depending on the nature of the app, a possible cheap solution would be caching the count of the collection, and Pagy makes that
really simple.</p>
<p>Pagy gets the collection count through its <code v-pre>pagy_get_count</code> method, so you can override it in your controller. Here is an example
using the rails cache:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<div class="codeblock-title">controller</div>
<pre class="language-ruby"><code v-pre class="language-ruby"># override the pagy_get_count method adding
# the Rails.cache wrapper around the count call
def pagy_get_count(collection, _vars)
  cache_key = &quot;pagy-#{collection.model.name}:#{collection.to_sql}&quot;
  Rails.cache.fetch(cache_key, expires_in: 20 * 60) do
    collection.count(:all)
  end
end</code></pre>
</doc-codeblock></div>
<div class="codeblock-wrapper"><doc-codeblock>
<div class="codeblock-title">model</div>
<pre class="language-ruby"><code v-pre class="language-ruby"># reset the cache when the model changes (you may omit the callbacks if your DB is static)
after_create { Rails.cache.delete_matched /^pagy-#{self.class.name}:/ }
after_destroy { Rails.cache.delete_matched /^pagy-#{self.class.name}:/ }</code></pre>
</doc-codeblock></div>
<p>That may work very well with static (or almost static) DBs, where there is not much writing and mostly reading. Less so with more
DB writing, and probably not particularly useful with a DB in constant change.</p>
   </doc-panel>
   <doc-panel id="avoid-the-count" collapsed>
       <template #title>Avoid the count</template>
<p>When the count caching is not an option, you may want to use the <a href="../extras/countless/">countless extra</a>, which totally avoids the
need for a count query, still providing an acceptable subset of the full pagination features.</p>
   </doc-panel>
   <doc-panel id="use-pagy-keyset" collapsed>
       <template #title>Use Pagy Keyset</template>
<p>If the slowness of the DB is caused by paginating big tables toward the ends of the collection (i.e. when the <code v-pre>offset</code> is a big
number) then you should use the <a href="../extras/keyset/">keyset extra</a>. (See lso the <a href="../api/keyset/">keyset API</a>)</p>
   </doc-panel>
</doc-panels>
<doc-anchor-target id="maximize-performance">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#maximize-performance">#</doc-anchor-trigger>
        <span>Maximize Performance</span>
    </h2>
</doc-anchor-target>
<p>Here are some tips that will help choosing the best way to use Pagy, depending on your requirements and environment.</p>
<doc-panels>
   <doc-panel id="consider-the-nav-js" collapsed>
       <template #title>Consider the nav_js</template>
<p>If you need the pagination bar with links and info, then you have a couple of choices, depending on your environment:</p>
<ul>
<li>Add the <code v-pre>oj</code> gem to your gemfile and use any <code v-pre>pagy*_nav_js</code> helper <em>(see <a href="../api/javascript/">Javascript</a>)</em>. That uses client
side rendering and it is faster and lighter than using any <code v-pre>pagy*_nav</code> helper <em>(40x faster, 36x lighter and 1,410x more
efficient than Kaminari)</em>. <em>Notice: the <code v-pre>oj</code> gem is not a requirement but helps the performance when it is available.</em></li>
</ul>
   </doc-panel>
   <doc-panel id="consider-the-combo-nav-js" collapsed>
       <template #title>Consider the combo_nav_js</template>
<p>If you don&#x27;t have strict requirements but still need to give the user total feedback and control on the page to display, then
consider the <code v-pre>pagy*_combo_nav_js</code> helpers. They are faster and lighter, and even more when the <code v-pre>oj</code> gem is available. That gives
you the best performance with nav info and UI <em>(48x faster, 48x lighter and 2,270x more efficient than Kaminari)</em> also saving real
estate.</p>
   </doc-panel>
   <doc-panel id="consider-the-countless-extra" collapsed>
       <template #title>Consider the countless extra</template>
<p>If your requirements allow to use the <code v-pre>countless</code> extra (minimal or automatic UI) you can save one query per page, and drastically
boost the efficiency eliminating the nav info and almost all the UI. Take a look at the examples in
the <a href="../extras/pagy/">pagy extra</a>.</p>
   </doc-panel>
   <doc-panel id="consider-the-arel-extra-and-or-the-fast-page-gem" collapsed>
       <template #title>Consider the Arel extra and/or the fast_page gem</template>
<p>You can improve the performance for <doc-anchor-trigger to="#paginate-a-grouped-collection">grouped collections</doc-anchor-trigger> with the <a href="../extras/arel/">arel extra</a>,
and queries on big data with <a href="https://github.com/planetscale/fast_page#pagy">fast_page</a>.</p>
   </doc-panel>
</doc-panels>
<doc-anchor-target id="ignore-brakeman-unescapedoutputs-false-positives-warnings">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#ignore-brakeman-unescapedoutputs-false-positives-warnings">#</doc-anchor-trigger>
        <span>Ignore Brakeman UnescapedOutputs false positives warnings</span>
    </h2>
</doc-anchor-target>
<p>Pagy output html safe HTML, however, being an agnostic pagination gem it does not use the specific <code v-pre>html_safe</code> rails helper on its
output. That is noted by the <a href="https://github.com/presidentbeef/brakeman">Brakeman</a> gem, that will raise a warning.</p>
<p>You can avoid the warning adding it to the <code v-pre>brakeman.ignore</code> file. More details <a href="https://github.com/ddnexus/pagy/issues/243">here</a>
and <a href="https://github.com/presidentbeef/brakeman/issues/1519">here</a>.</p>
<doc-anchor-target id="handle-pagyoverflowerror-exceptions">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#handle-pagyoverflowerror-exceptions">#</doc-anchor-trigger>
        <span>Handle Pagy::OverflowError exceptions</span>
    </h2>
</doc-anchor-target>
<p>Pass an overflowing <code v-pre>:page</code> number and Pagy will raise a <code v-pre>Pagy::OverflowError</code> exception.</p>
<p>This often happens because users/clients paginate over the end of the record set or records go deleted and a user went to a stale
page.</p>
<p>You can handle the exception by using the <a href="../extras/overflow/">overflow extra</a> which provides a few easy and ready to use
solutions for a few common cases, or you can rescue the exception manually and do whatever fits you better.</p>
<p>Here are a few options for manually handling the error in apps:</p>
<ul>
<li>Do nothing and let the page render a 500</li>
<li>Rescue and render a 404</li>
<li>Rescue and redirect to the last known page (Notice: the <a href="../extras/overflow/">overflow extra</a> provides the same behavior without
redirecting)</li>
</ul>
<div class="codeblock-wrapper"><doc-codeblock>
<div class="codeblock-title">controller</div>
<pre class="language-ruby"><code v-pre class="language-ruby">rescue_from Pagy::OverflowError, with: :redirect_to_last_page

private

def redirect_to_last_page(exception)
  redirect_to url_for(page: exception.pagy.last), notice: &quot;Page ##{params[:page]} is overflowing. Showing page #{exception.pagy.last} instead.&quot;
end</code></pre>
</doc-codeblock></div>
<div class="flex mb-6">
    <div class="shrink-0 w-1 rounded-tl rounded-bl bg-yellow-500"></div>
    <div class="flex w-full py-4 border border-l-0 border-gray-300 rounded-tr rounded-br doc-alert bg-white dark:bg-dark-700 dark:border-dark-700" role="alert">
        <div class="flex items-center ml-4 h-7">
            <svg xmlns="http://www.w3.org/2000/svg" class="mb-px text-yellow-500" width="22" height="22" viewBox="0 0 24 24" role="presentation">
                <g fill="currentColor"><g>
                    <path d="M22.48 15.59L14.01 1.45A2.968 2.968 0 0012.16.09c-.78-.19-1.58-.07-2.27.35-.41.25-.76.6-1.01 1.01v.01L.4 15.6c-.83 1.43-.33 3.27 1.1 4.1.45.26.95.4 1.48.4h16.95c.8-.01 1.55-.33 2.11-.9.56-.57.87-1.33.86-2.13a3.04 3.04 0 00-.42-1.48zm-1.87 2.21c-.19.19-.44.3-.69.3H2.99c-.17 0-.34-.05-.49-.13a.992.992 0 01-.37-1.35L10.6 2.48c.08-.14.2-.25.34-.33a.992.992 0 011.37.33l8.46 14.13c.09.15.13.32.13.49 0 .26-.1.51-.29.7z"></path>
                    <path d="M11.45 12.1c.55 0 1-.45 1-1v-4c0-.55-.45-1-1-1s-1 .45-1 1v4c0 .56.45 1 1 1zM11.46 14.1c-.56 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z"></path>
                </g></g>
            </svg>
        </div>
        <div class="pr-5 ml-3 w-full">
            <h5>Rescue from <code v-pre>Pagy::OverflowError</code> first</h5>
<p>All Pagy exceptions are subclasses of <code v-pre>ArgumentError</code>, so if you need to <code v-pre>rescue_from ArgumentError, ...</code> along with
<code v-pre>rescue_from Pagy::OverflowError, ...</code> then the <code v-pre>Pagy::OverflowError</code> line should go BEFORE the <code v-pre>ArgumentError</code> line or it
will never get rescued.</p>
        </div>
    </div>
</div>
<doc-anchor-target id="test-with-pagy">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#test-with-pagy">#</doc-anchor-trigger>
        <span>Test with Pagy</span>
    </h2>
</doc-anchor-target>
<ul>
<li>Pagy has 100% test coverage.</li>
<li>You only need to test pagy if you have overridden methods.</li>
</ul>
<p>If you need to test pagination, remember:</p>
<ul>
<li><code v-pre>Pagy::DEFAULT</code> should be set by your initializer and be frozen. You can test that your code cannot change it.</li>
<li>You can override defaults - i.e. any pagy variable can be passed to a pagy constructor. For example:</li>
</ul>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-ruby"><code v-pre class="language-ruby">@pagy, @books = pagy(Book.all, limit: 10) # the default limit has been overridden</code></pre>
</doc-codeblock></div>
<doc-anchor-target id="using-your-pagination-templates">
    <h2>
        <doc-anchor-trigger class="header-anchor-trigger" to="#using-your-pagination-templates">#</doc-anchor-trigger>
        <span>Using your pagination templates</span>
    </h2>
</doc-anchor-target>
<div class="flex mb-6">
    <div class="shrink-0 w-1 rounded-tl rounded-bl bg-yellow-500"></div>
    <div class="flex w-full py-4 border border-l-0 border-gray-300 rounded-tr rounded-br doc-alert bg-white dark:bg-dark-700 dark:border-dark-700" role="alert">
        <div class="flex items-center ml-4 h-7">
            <svg xmlns="http://www.w3.org/2000/svg" class="mb-px text-yellow-500" width="22" height="22" viewBox="0 0 24 24" role="presentation">
                <g fill="currentColor"><g>
                    <path d="M22.48 15.59L14.01 1.45A2.968 2.968 0 0012.16.09c-.78-.19-1.58-.07-2.27.35-.41.25-.76.6-1.01 1.01v.01L.4 15.6c-.83 1.43-.33 3.27 1.1 4.1.45.26.95.4 1.48.4h16.95c.8-.01 1.55-.33 2.11-.9.56-.57.87-1.33.86-2.13a3.04 3.04 0 00-.42-1.48zm-1.87 2.21c-.19.19-.44.3-.69.3H2.99c-.17 0-.34-.05-.49-.13a.992.992 0 01-.37-1.35L10.6 2.48c.08-.14.2-.25.34-.33a.992.992 0 011.37.33l8.46 14.13c.09.15.13.32.13.49 0 .26-.1.51-.29.7z"></path>
                    <path d="M11.45 12.1c.55 0 1-.45 1-1v-4c0-.55-.45-1-1-1s-1 .45-1 1v4c0 .56.45 1 1 1zM11.46 14.1c-.56 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z"></path>
                </g></g>
            </svg>
        </div>
        <div class="pr-5 ml-3 w-full">
            <h5>Warning!</h5>
<p>The pagy nav helpers are not only a lot faster than templates, but accept dynamic arguments and comply with ARIA and I18n
standards. Using your own templates is possible, but it&#x27;s likely just reinventing a slower wheel.</p>
        </div>
    </div>
</div>
<p>If you really need to use your own templates, you absolutely can. Here is a static example that doesn&#x27;t use any other helper nor
dictionary file for the sake of simplicity, however feel free to add your dynamic variables and use any helper and dictionary
entries as you need:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-erb"><code v-pre class="language-erb">&lt;%# IMPORTANT: use '&lt;%== ... ' instead of '&lt;%= ... ' if you run this in rails %&gt;

&lt;%# The a variable below is set to a lambda that generates the a tag %&gt;
&lt;%# Usage: a_tag = a.(page_number, text, classes: nil, aria_label: nil) %&gt;
&lt;% a = pagy_anchor(pagy) %&gt;
&lt;nav class=&quot;pagy nav&quot; aria-label=&quot;Pages&quot;&gt;
  &lt;%# Previous page link %&gt;
  &lt;% if pagy.prev %&gt;
    &lt;%= a.(pagy.prev, '&amp;lt;', aria_label: 'Previous') %&gt;
  &lt;% else %&gt;
    &lt;a role=&quot;link&quot; aria-disabled=&quot;true&quot; aria-label=&quot;Previous&quot;&gt;&amp;lt;&lt;/a&gt;
  &lt;% end %&gt;
  &lt;%# Page links (series example: [1, :gap, 7, 8, &quot;9&quot;, 10, 11, :gap, 36]) %&gt;
  &lt;% pagy.series.each do |item| %&gt;
    &lt;% if item.is_a?(Integer) %&gt;
      &lt;%= a.(item) %&gt;
    &lt;% elsif item.is_a?(String) %&gt;
      &lt;a role=&quot;link&quot; aria-disabled=&quot;true&quot; aria-current=&quot;page&quot; class=&quot;current&quot;&gt;&lt;%= item %&gt;&lt;/a&gt;
    &lt;% elsif item == :gap %&gt;
      &lt;a role=&quot;link&quot; aria-disabled=&quot;true&quot; class=&quot;gap&quot;&gt;&amp;hellip;&lt;/a&gt;
    &lt;% end %&gt;
  &lt;% end %&gt;
  &lt;%# Next page link %&gt;
  &lt;% if pagy.next %&gt;
    &lt;%= a.(pagy.next, '&amp;gt;', aria_label: 'Next') %&gt;
  &lt;% else %&gt;
    &lt;a role=&quot;link&quot; aria-disabled=&quot;true&quot; aria-label=&quot;Next&quot;&gt;&amp;lt;&lt;/a&gt;
  &lt;% end %&gt;
&lt;/nav&gt;</code></pre>
</doc-codeblock></div>
<p>You can use it as usual: just remember to pass the <code v-pre>:pagy</code> local set to the <code v-pre>@pagy</code> object:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-erb"><code v-pre class="language-erb">&lt;%== render file: 'nav.html.erb', locals: {pagy: @pagy} %&gt;</code></pre>
</doc-codeblock></div>
<div class="flex mb-6">
    <div class="shrink-0 w-1 rounded-tl rounded-bl bg-blue-500 dark:bg-blue-400"></div>
    <div class="flex w-full py-4 border border-l-0 border-gray-300 rounded-tr rounded-br doc-alert bg-white dark:bg-dark-700 dark:border-dark-700" role="alert">
        <div class="flex items-center ml-4 h-7">
            <svg xmlns="http://www.w3.org/2000/svg" class="mb-px text-blue-500 dark:text-blue-400" width="22" height="22" viewBox="0 0 24 24" role="presentation">
                <g fill="currentColor"><g>
                    <path d="M12 1C5.93 1 1 5.93 1 12s4.93 11 11 11 11-4.93 11-11S18.07 1 12 1zm0 20c-4.96 0-9-4.04-9-9s4.04-9 9-9 9 4.04 9 9-4.04 9-9 9z"></path>
                    <path d="M12 11c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1s1-.45 1-1v-4c0-.55-.45-1-1-1zM12.01 7c-.56 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z"></path>
                    <path fill="none" d="M0 0h24v24H0z"></path>
                </g></g>
            </svg>
        </div>
        <div class="pr-5 ml-3 w-full">
<p>You may want to look at the actual output interactively by running:</p>
<div class="codeblock-wrapper"><doc-codeblock>
<pre class="language-bash"><code v-pre class="language-bash">pagy demo
# or: bundle exec pagy demo</code></pre>
</doc-codeblock></div>
<p>...and point your browser at <a href="http://0.0.0.0:8000/template">http://0.0.0.0:8000/template</a></p>
        </div>
    </div>
</div>
<p>You may want to read also the <a href="../api/frontend/">Pagy::Frontend API documentation</a> for complete control over your templates.</p>

                                
                                <!-- Required only on API pages -->
                                <doc-toolbar-member-filter-no-results></doc-toolbar-member-filter-no-results>
                            </div>
                            <footer class="clear-both">
                                <div class="flex flex-wrap items-center justify-between mt-14">
                                    <a class="my-2.5 inline-flex items-center text-sm whitespace-nowrap text-blue-500 dark:text-blue-400 hover:text-blue-700 hover:underline" href="https://github.com/ddnexus/pagy/blob/master/docs/how-to.md" target="_blank" rel="noopener">
                                        <svg class="mr-1.5" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor" overflow="visible"><path d="M20 12c-.55 0-1 .45-1 1v7c0 .55-.45 1-1 1H4c-.55 0-1-.45-1-1V6c0-.55.45-1 1-1h7c.55 0 1-.45 1-1s-.45-1-1-1H4C2.35 3 1 4.35 1 6v14c0 1.65 1.35 3 3 3h14c1.65 0 3-1.35 3-3v-7c0-.55-.45-1-1-1z" /><path d="M22.21 1.79c-1.18-1.18-3.24-1.18-4.41 0l-9.5 9.5c-.13.13-.22.29-.26.46l-1 4c-.08.34.01.7.26.95.18.2.44.3.7.3.08 0 .16-.01.24-.03l4-1c.18-.04.34-.13.46-.26l9.5-9.5c1.22-1.22 1.22-3.2.01-4.42zm-1.42 3l-9.3 9.3-2.11.53.53-2.11 9.3-9.3c.42-.42 1.16-.42 1.59 0 .43.43.43 1.15-.01 1.58z" /><path fill="none" d="M0 0h24v24H0z" /></svg>
                                        <span>Edit this page</span>
                                    </a>
                                </div>
                            
                                <nav class="flex mt-14">
                                    <div class="w-1/2">
                                        <a class="px-5 py-4 h-full flex items-center break-normal font-medium text-blue-500 dark:text-blue-400 border border-gray-300 hover:border-gray-400 dark:border-dark-650 dark:hover:border-dark-450 rounded-l-lg transition-colors duration-150 relative hover:z-5" href="../../docs/migration-guide/">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="mr-3" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" overflow="visible"><path d="M19 11H7.41l5.29-5.29a.996.996 0 10-1.41-1.41l-7 7a1 1 0 000 1.42l7 7a1.024 1.024 0 001.42-.01.996.996 0 000-1.41L7.41 13H19c.55 0 1-.45 1-1s-.45-1-1-1z" /><path fill="none" d="M0 0h24v24H0z" /></svg>
                                            <span>
                                                <span class="block text-xs font-normal text-gray-400 dark:text-dark-400">Previous</span>
                                                <span class="block mt-1">Migrate from other gems</span>
                                            </span>
                                        </a>
                                    </div>
                            
                                    <div class="w-1/2">
                                        <a class="px-5 py-4 -mx-px h-full flex items-center justify-end break-normal font-medium text-blue-500 dark:text-blue-400 border border-gray-300 hover:border-gray-400 dark:border-dark-650 dark:hover:border-dark-450 rounded-r-lg transition-colors duration-150 relative hover:z-5" href="../../docs/api/aria/">
                                            <span>
                                                <span class="block text-xs font-normal text-right text-gray-400 dark:text-dark-400">Next</span>
                                                <span class="block mt-1">ARIA Attributes</span>
                                            </span>
                                            <svg xmlns="http://www.w3.org/2000/svg" class="ml-3" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" overflow="visible"><path d="M19.92 12.38a1 1 0 00-.22-1.09l-7-7a.996.996 0 10-1.41 1.41l5.3 5.3H5c-.55 0-1 .45-1 1s.45 1 1 1h11.59l-5.29 5.29a.996.996 0 000 1.41c.19.2.44.3.7.3s.51-.1.71-.29l7-7c.09-.09.16-.21.21-.33z" /><path fill="none" d="M0 0h24v24H0z" /></svg>
                                        </a>
                                    </div>
                                </nav>
                            </footer>
                        </main>
                
                        <div class="border-t dark:border-dark-650 pt-6 mb-8">
                            <footer class="flex flex-wrap items-center justify-between">
                                <div>
                                    <ul class="flex flex-wrap items-center text-sm">
                                    </ul>
                                </div>
                                <div class="docs-copyright py-2 text-gray-500 dark:text-dark-350 text-sm leading-relaxed"><p>© 2017-2024 <a href="https://github.com/ddnexus">Domizio Demichelis</a> - <a href="https://opensource.org/licenses/MIT">MIT License</a></p></div>
                            </footer>
                        </div>
                    </div>
                
                    <!-- Rendered if sidebar right is enabled -->
                    <!-- Sidebar right skeleton-->
                    <div v-cloak class="fixed top-0 bottom-0 right-0 translate-x-full bg-white border-gray-200 lg:sticky lg:border-l lg:shrink-0 lg:pt-6 lg:transform-none sm:w-1/2 lg:w-64 lg:z-0 md:w-104 sidebar-right skeleton dark:bg-dark-850 dark:border-dark-650">
                        <div class="pl-5">
                            <div class="w-32 h-3 mb-4 bg-gray-200 dark:bg-dark-600 rounded-full loading"></div>
                            <div class="w-48 h-3 mb-4 bg-gray-200 dark:bg-dark-600 rounded-full loading"></div>
                            <div class="w-40 h-3 mb-4 bg-gray-200 dark:bg-dark-600 rounded-full loading"></div>
                        </div>
                    </div>
                
                    <!-- User should be able to hide sidebar right -->
                    <doc-sidebar-right v-cloak></doc-sidebar-right>
                </div>

            </div>
        </div>
    
        <doc-search-mobile></doc-search-mobile>
        <doc-back-to-top></doc-back-to-top>
    </div>


    <div id="docs-overlay-target"></div>

    <script data-cfasync="false">window.__DOCS__ = { "title": "How To", level: 2, icon: "file", hasPrism: true, hasMermaid: false, hasMath: false, tocDepth: 23 }</script>
</body>
</html>
